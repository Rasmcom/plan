<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مجال الرياضة والصحة</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f7fafc;
        }
        .tab-button {
            transition: all 0.3s ease;
            border-bottom: 4px solid transparent;
            border-radius: 8px 8px 0 0;
            background-color: #e2e8f0;
            color: #4a5568;
        }
        .tab-button.active {
            border-color: #38a169;
            background-color: #ffffff;
            color: #2c7a7b;
            font-weight: 700;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .a4-page {
            width: 210mm;
            min-height: 297mm;
            padding: 12mm 5mm;
            margin: 1cm auto;
            border: 1px #D1D5DB solid;
            border-radius: 5px;
            background: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }
        .a4-page main {
            flex-grow: 1;
        }
        .report-label {
            color: #067693;
            background-color: #f0f9ff;
            font-weight: bold;
            padding: 8px;
            border-left: 4px solid #0891b2;
        }
        .table-bordered th, .table-bordered td {
            border: 1px solid #e2e8f0;
            padding: 6px;
            text-align: right;
            vertical-align: middle;
            font-size: 0.8rem;
        }
        #date-picker-modal .week-grid .day.selected {
            background-color: #0d9488;
            color: white;
            border-color: #0f766e;
        }
        #date-picker-modal .week-grid .day.disabled {
            background-color: #F3F4F6;
            color: #9CA3AF;
            cursor: not-allowed;
        }
        .evaluation-table input[type="radio"], .evaluation-table input[type="checkbox"] {
            transform: scale(1.2);
        }

        .print-header-container, .print-footer-container {
            display: none;
        }

        .gradient-line {
            height: 5px;
            background: linear-gradient(to left, #28a745, #007bff);
            border-radius: 2.5px;
        }

        /* Responsive Styles for Mobile */
        @media screen and (max-width: 768px) {
            .container {
                padding-left: 0;
                padding-right: 0;
            }
            .a4-page {
                width: 100%;
                min-height: 0;
                padding: 16px;
                margin: 0;
                border: none;
                box-shadow: none;
            }
            .no-print, header.no-print {
                padding-left: 1rem;
                padding-right: 1rem;
            }
             h1 {
                font-size: 1.5rem; /* 24px */
            }
            .tab-button {
                font-size: 0.875rem; /* 14px */
                padding: 8px 12px;
            }
            .table-bordered {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
            .a4-page .grid-cols-2 {
                grid-template-columns: repeat(1, minmax(0, 1fr));
            }
            .flex-1 {
                 min-width: 0;
            }
            #output-plan footer .grid-cols-2, #output-report footer .grid-cols-2 {
                 grid-template-columns: repeat(1, minmax(0, 1fr));
                 gap: 1rem;
            }
        }

        @media print {
            @page {
                size: A4 portrait;
                margin: 0;
            }

            * {
                -webkit-print-color-adjust: exact !important;
                color-adjust: exact !important;
            }

            .no-print {
                display: none !important;
            }

            body,
            html {
                background: white !important;
                margin: 0;
                padding: 0;
                font-size: 9pt;
            }
            
            textarea {
                overflow: hidden !important;
                height: auto !important;
                resize: none;
            }

            .a4-page {
                box-shadow: none !important;
                max-width: 100% !important;
                width: 100% !important; /* Ensure it takes full width for printing */
                margin: 0 !important;
                border: none !important;
                padding: 1cm 5mm;
                page-break-inside: avoid;
                height: auto;
                min-height: 0; 
            }

            .content-section {
                display: none !important;
            }

            .content-section.printable-active {
                display: block !important;
            }
            
            .table-bordered, .table-bordered th, .table-bordered td {
                padding: 4px;
                font-size: 8pt;
                white-space: normal; /* Allow text to wrap when printing */
            }
            
            h2 { font-size: 14pt; }
            
            #image-upload-grid {
                grid-template-columns: repeat(3, 1fr) !important;
            }
            .image-upload-slot {
                height: 5cm;
                aspect-ratio: auto;
            }
             .image-upload-slot img {
                object-fit: contain;
            }
        }
    </style>
</head>
<body class="text-slate-800">

    <div class="container mx-auto px-4 py-8">
        <header class="flex justify-between items-center mb-8 pb-4 border-b-2 border-teal-600 no-print">
            <div class="flex items-center gap-4">
                <img src="https://salogos.org/wp-content/uploads/2021/11/UntiTtled-1-1300x988.png" alt="شعار وزارة التعليم" class="h-20">
                <div>
                    <h1 class="text-3xl font-bold text-teal-800">مجال الرياضة والصحة</h1>
                    <p class="text-slate-600">إدارة خطط وتقارير برامج المجال</p>
                </div>
            </div>
        </header>

        <div class="flex justify-center gap-2 mb-8 no-print">
            <button id="tab-btn-plan" class="tab-button active flex items-center gap-2 text-lg py-3 px-6">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><line x1="10" y1="9" x2="8" y2="9"></line></svg>
                خطة برامج النشاط
            </button>
            <button id="tab-btn-reports" class="tab-button flex items-center gap-2 text-lg py-3 px-6">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 17h20"></path><path d="M6 17v-7a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v7"></path><path d="M12 7V4H8v3"></path><path d="M18 17v-5a2 2 0 0 0-2-2h-4"></path></svg>
                التقارير
            </button>
        </div>

        <main>
            <div id="content-plan" class="content-section active">
                <div id="setup-screen-plan" class="no-print">
                    <div class="max-w-4xl mx-auto bg-white p-8 rounded-2xl shadow-lg border border-slate-200">
                        <div class="grid md:grid-cols-2 gap-4 mb-6">
                            <input type="text" id="education-admin" placeholder="الإدارة التعليمية: ..." class="w-full p-3 border border-slate-300 rounded-lg">
                            <input type="text" id="school-name" placeholder="المدرسة: ..." class="w-full p-3 border border-slate-300 rounded-lg">
                        </div>

                        <div class="space-y-6">
                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <h3 class="text-xl font-bold mb-3 text-teal-700">1. اختر المنطقة</h3>
                                    <div class="flex gap-3">
                                        <button id="btn-region-other" class="w-full p-3 border rounded-lg transition">باقي المناطق</button>
                                        <button id="btn-region-western" class="w-full p-3 border rounded-lg transition">المنطقة الغربية</button>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold mb-3 text-teal-700">2. اختر المرحلة</h3>
                                    <select id="stage-select-plan" class="w-full p-3 border border-slate-300 rounded-lg">
                                        <option value="">-- اختر مرحلة دراسية --</option>
                                        <option value="primary">الابتدائية (الأولية)</option>
                                        <option value="upper-primary">الابتدائية (العليا)</option>
                                        <option value="middle">المتوسطة</option>
                                        <option value="high-2">الثانوية</option>
                                    </select>
                                </div>
                            </div>
                             <div>
                                <h3 class="text-xl font-bold mb-3 text-teal-700">3. اختر البرنامج</h3>
                                <div class="grid grid-cols-1 gap-4">
                                    <select id="program-select-plan" class="w-full p-3 border border-slate-300 rounded-lg" disabled>
                                        <option value="">-- اختر البرنامج --</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold mb-3 text-teal-700">4. اختر الهدف من البرنامج</h3>
                                <select id="objective-select" class="w-full p-3 border border-slate-300 rounded-lg bg-slate-50" disabled>
                                    <option value="">-- اختر الهدف --</option>
                                </select>
                            </div>
                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <h3 class="text-xl font-bold mb-3 text-teal-700">5. حدد تواريخ التنفيذ</h3>
                                    <button id="date-picker-btn" class="w-full p-3 border border-slate-300 rounded-lg text-right text-slate-500 hover:bg-slate-50 transition" disabled>اختر تواريخ الحصص</button>
                                    <div id="program-details-plan" class="border-2 border-teal-100 bg-teal-50/50 p-3 rounded-lg mt-4 text-sm min-h-[60px]"></div>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold mb-3 text-teal-700">6. أدخل البيانات الأساسية</h3>
                                    <div class="space-y-4">
                                        <input type="text" id="teacher-name" placeholder="المعلم/ة المنفذ/ة" class="w-full p-3 border border-slate-300 rounded-lg">
                                        <input type="text" id="leader-name" placeholder="رائد/ة النشاط: الاسم" class="w-full p-3 border border-slate-300 rounded-lg">
                                        <input type="text" id="director-name" placeholder="مدير/ة المدرسة: الاسم" class="w-full p-3 border border-slate-300 rounded-lg">
                                    </div>
                                </div>
                            </div>
                             <div>
                                <h3 class="text-xl font-bold mb-3 text-teal-700">7. تفاصيل إضافية (مقترحة)</h3>
                                <div class="grid md:grid-cols-2 gap-4">
                                    <textarea id="additional-achievements" placeholder="الإنجازات" class="w-full p-3 border border-slate-300 rounded-lg h-24"></textarea>
                                    <textarea id="strengths" placeholder="نقاط القوة" class="w-full p-3 border border-slate-300 rounded-lg h-24"></textarea>
                                    <textarea id="difficulties" placeholder="الصعوبات" class="w-full p-3 border border-slate-300 rounded-lg h-24"></textarea>
                                    <textarea id="remedial-actions" placeholder="الإجراءات العلاجية" class="w-full p-3 border border-slate-300 rounded-lg h-24"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="mt-10 text-center flex gap-4">
                            <button id="generate-plan-btn" class="w-full bg-teal-600 text-white font-bold py-3 px-10 rounded-lg hover:bg-teal-700 transition text-lg">إعداد الخطة للطباعة</button>
                             <button id="reset-plan-btn" class="w-auto bg-red-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-red-700 transition">إعادة تعيين</button>
                        </div>
                    </div>
                </div>

                <div id="output-plan" class="hidden">
                    <div class="text-center mb-6 no-print">
                        <button onclick="printContent('output-plan')" class="bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition">🖨️ طباعة الخطة</button>
                        <button onclick="document.getElementById('output-plan').classList.add('hidden'); document.getElementById('setup-screen-plan').classList.remove('hidden');" class="bg-slate-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 transition">🔄 العودة</button>
                    </div>
                    <div class="a4-page">
                        <header class="mb-4">
                            <div class="flex justify-between items-center pb-2">
                                <img src="https://salogos.org/wp-content/uploads/2021/11/UntiTtled-1-1300x988.png" alt="شعار وزارة التعليم" class="h-20">
                                <div class="flex-1 mr-4 space-y-2 text-base text-right">
                                     <p id="report-education-admin-plan" class="font-bold"></p>
                                     <p id="report-school-name-plan" class="font-bold"></p>
                                </div>
                            </div>
                            <div class="gradient-line mt-2"></div>
                            <h2 class="text-2xl font-bold text-teal-800 text-center mt-4">خطة تنفيذ برنامج النشاط الطلابي</h2>
                        </header>
                        <main>
                            <table class="w-full mb-4 text-sm border-collapse">
                                <tbody>
                                    <tr>
                                        <td class="report-label w-1/5">اسم البرنامج:</td>
                                        <td id="report-program-name-plan" class="p-2 border border-slate-200 w-3/10"></td>
                                        <td class="report-label w-1/5">تفاصيل البرنامج:</td>
                                        <td id="report-program-details-name-plan" class="p-2 border border-slate-200 w-3/10"></td>
                                    </tr>
                                    <tr>
                                        <td class="report-label">الهدف من البرنامج:</td>
                                        <td id="report-objective-plan" class="p-2 border border-slate-200"></td>
                                        <td class="report-label">الفئة المستهدفة:</td>
                                        <td id="report-program-target-plan" class="p-2 border border-slate-200"></td>
                                    </tr>
                                    <tr>
                                        <td class="report-label">المعلم/ة المنفذ/ة:</td>
                                        <td id="report-teacher-name-plan" class="p-2 border border-slate-200"></td>
                                        <td class="report-label">مدة التنفيذ:</td>
                                        <td id="report-duration-plan" class="p-2 border border-slate-200"></td>
                                    </tr>
                                    <tr>
                                        <td class="report-label">مكان التنفيذ:</td>
                                        <td id="report-location-plan" class="p-2 border border-slate-200 whitespace-pre-line"></td>
                                        <td class="report-label">أدوات التنفيذ:</td>
                                        <td id="report-tools-plan" class="p-2 border border-slate-200 whitespace-pre-line"></td>
                                    </tr>
                                    <tr>
                                        <td class="report-label align-top">نواتج التعلم:</td>
                                        <td id="report-learning-outcomes-plan" class="p-2 border border-slate-200 whitespace-pre-line" colspan="3"></td>
                                    </tr>
                                    <tr>
                                        <td class="report-label w-1/4">أساليب التقويم:</td>
                                        <td id="report-assessment-methods-plan" class="p-2 border border-slate-200 whitespace-pre-line" colspan="3"></td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="w-full table-bordered mb-6">
                                <thead class="bg-teal-50 font-bold">
                                    <tr><th class="w-[15%]">الأسبوع</th><th class="w-[20%]">التاريخ</th><th class="w-[20%]">عنوان الحصة</th><th class="w-[30%]">المحتوى والإجراءات</th><th class="w-[15%]">الحالة</th></tr>
                                </thead>
                                <tbody id="plan-table-body"></tbody>
                            </table>
                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div><h4 class="report-label mb-1">الإنجازات</h4><p id="report-additional-achievements-plan" class="p-2 border border-slate-200 min-h-[40px] whitespace-pre-wrap"></p></div>
                                <div><h4 class="report-label mb-1">نقاط القوة</h4><p id="report-strengths-plan" class="p-2 border border-slate-200 min-h-[40px] whitespace-pre-wrap"></p></div>
                                <div><h4 class="report-label mb-1">الصعوبات</h4><p id="report-difficulties-plan" class="p-2 border border-slate-200 min-h-[40px] whitespace-pre-wrap"></p></div>
                                <div><h4 class="report-label mb-1">الإجراءات العلاجية</h4><p id="report-remedial-actions-plan" class="p-2 border border-slate-200 min-h-[40px] whitespace-pre-wrap"></p></div>
                            </div>
                        </main>
                        <footer class="pt-8 text-center text-xs">
                            <div class="gradient-line mb-4"></div>
                            <div class="grid grid-cols-2 gap-16">
                                <div class="pt-2 mt-2"><p id="report-leader-name-plan" class="font-bold h-6"></p></div>
                                <div class="pt-2 mt-2"><p id="report-director-name-plan" class="font-bold h-6"></p></div>
                            </div>
                        </footer>
                    </div>
                </div>
            </div>

            <div id="content-reports" class="content-section">
                <div id="setup-screen-reports" class="no-print">
                    <div class="max-w-4xl mx-auto bg-white p-8 rounded-2xl shadow-lg border border-slate-200">
                        <h2 class="text-2xl font-bold text-teal-800 mb-6">إعداد تقرير برنامج النشاط</h2>
                        <div class="grid md:grid-cols-2 gap-4">
                            <select id="stage-select-reports" class="w-full p-3 border border-slate-300 rounded-lg">
                                 <option value="">-- اختر المرحلة الدراسية --</option>
                            </select>
                            <select id="program-select-reports" class="w-full p-3 border border-slate-300 rounded-lg" disabled>
                                <option value="">-- اختر البرنامج --</option>
                            </select>
                        </div>
                        <div id="report-dates-display" class="mt-4 text-center text-slate-600 bg-slate-100 p-3 rounded-lg">اختر مرحلة وبرنامج لعرض التواريخ</div>
                         <div class="mt-6 text-center">
                            <button id="generate-report-btn" class="w-full bg-teal-600 text-white font-bold py-3 px-10 rounded-lg hover:bg-teal-700 transition text-lg" disabled>إنشاء نموذج التقرير</button>
                        </div>
                    </div>
                </div>
                <div id="output-report" class="hidden">
                     <div class="text-center mb-6 no-print">
                        <button onclick="printContent('output-report')" class="bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition">🖨️ طباعة التقرير</button>
                        <button onclick="document.getElementById('output-report').classList.add('hidden'); document.getElementById('setup-screen-reports').classList.remove('hidden');" class="bg-slate-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 transition">🔄 العودة</button>
                    </div>
                    <div class="a4-page" id="report-page-content">
                        </div>
                </div>
            </div>

        </main>
    </div>
<footer class="text-center py-6 mt-12 border-t border-slate-200 no-print">
    <a href="https://www.rasmcom.com" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center gap-3 text-sm text-gray-600 hover:text-teal-700 transition" style="text-decoration: none;">
        <img src="https://e.top4top.io/p_3463x5tj40.png" alt="شعار رسم" class="h-10 w-auto" style="height: 2.5rem; width: auto; border: none;">
        <span>جميع الحقوق محفوظة لقناة رسم للتصميم والخدمات التعليمية 2025</span>
    </a>
</footer>
    <div id="date-picker-modal" class="fixed inset-0 z-50 items-center justify-center p-4 bg-black bg-opacity-50 hidden no-print">
        <div class="bg-white rounded-lg shadow-xl p-6 max-w-4xl w-full">
            <h3 id="modal-title" class="text-xl font-bold mb-4">اختر تواريخ التنفيذ</h3>
            <div id="modal-weeks-container" class="space-y-4 max-h-96 overflow-y-auto"></div>
            <div class="mt-6 flex justify-end gap-3">
                <button onclick="closeDatePicker()" class="px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400">إلغاء</button>
                <button onclick="saveDates()" class="px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700">حفظ التواريخ</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {

            const createGenericProgramData = (programName, sessionCount) => {
                const duration = `${sessionCount * 45} دقيقة (${sessionCount} حصص)`;
                const details = Array.from({ length: sessionCount }, (_, i) => ({
                    week: `${Math.floor(i / 2) + 1}`,
                    date: 'يحدد لاحقًا',
                    title: `الحصة ${i + 1}`,
                    content: i === 0 ? 'مقدمة تعريفية عن البرنامج وأهدافه.' : 'تطبيقات وأنشطة متنوعة.'
                }));
                return {
                    name: programName,
                    sessions: sessionCount,
                    duration: duration,
                    target: "طلاب المرحلة المحددة",
                    location: "قاعات مدرسية / فناء المدرسة",
                    tools: "مواد وأدوات حسب طبيعة البرنامج",
                    learningOutcomes: "1. تحقيق أهداف البرنامج المحددة.\n2. تنمية مهارات الطلاب.\n3. تعزيز القيم المستهدفة.",
                    assessmentMethods: "الملاحظة، ملف الإنجاز، قوائم الشطب",
                    details: details,
                    strengths: "- تفاعل إيجابي من الطلاب.\n- ملاءمة المحتوى للفئة المستهدفة.",
                    difficulties: "- الحاجة لمزيد من الوقت لتنفيذ كافة الأنشطة.",
                    achievements: "- إنجاز مشاريع طلابية مبتكرة.\n- اكتساب الطلاب للمهارات المستهدفة.",
                    remedial_actions: "- تقديم دعم إضافي للطلاب حسب الحاجة.\n- تكييف الأنشطة لتناسب جميع المستويات.",
                };
            };

            const programDefinitions = {
                'sports_health': {
                    field: "الرياضة والصحة",
                    programs: { 'team_sports': "مهارات الرياضات الجماعية", 'individual_sports': "مهارات الرياضات الفردية", 'self_defense': "مهارات رياضات الدفاع عن النفس", 'esports': "مهارات الرياضات الإلكترونية   ", 'mental_sports': "مهارات الرياضات الذهنية", 'olympiad': "مهارات الأولمبياد الرياضي" }
                }
            };
            
            let fieldsData = {};

            // START: Content from text file
            fieldsData.olympiad = {
                name: "مهارات الأولمبياد الرياضي",
                field: "الرياضة والصحة",
                stages: {
                    'primary': {
                        name: "برنامج مهارات الأولمبياد الرياضي – الصفوف الأولية",
                        sessions: 6,
                        duration: "270 دقيقة (6 حصص)",
                        target: "الصفوف الأولية",
                        location: "فناء المدرسة",
                        tools: "حواجز صغيرة، كرات، حلقات، أقماع",
                        learningOutcomes: "• المشاركة في سباقات أو تحديات حركية بسيطة تعزز السرعة والقدرة البدنية، ويُظهر حماسه للاستمرار في النشاط لوقت أطول، مما يعكس تحسنًا في عناصر اللياقة.\n• ممارسة أداء سريع ودقيق في تحديات أولبية مبسطة، ويُبدي التزاما بالقواعد وروحا تنافسية بناءة، مما يدل على استعداده للمشاركة في منافسات مدرسية.\n• المشاركة في سباقات وتحديات مبسطة، ويُظهر تحسنًا في الأداء البدني والحركي المرتبط بنموه.\n• إبداء حماس عند خوض تحديات بدنية متنوعة، ويشارك في مسابقات مدرسية مبسطة تناسب ميوله البدنية، مع الالتزام بقواعد اللعب.",
                        assessmentMethods: "الملاحظة المباشرة، قوائم الشطب",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'التعرف على الأولمبياد المدرسي', content: 'مقدمة + عرض قصير + تجربة نشاط مبسط.' },
                            { week: '1', date: 'لاحقًا', title: 'سباق الجري القصير', content: 'تدريب على الجري – منافسة بسيطة.' },
                            { week: '2', date: 'لاحقًا', title: 'سباق الحواجز المبسط', content: 'القفز فوق حواجز صغيرة – منافسة ودية.' },
                            { week: '2', date: 'لاحقًا', title: 'لعبة الرمي الدائري', content: 'رمي كرة/حلقة نحو هدف – تقسيم مجموعات.' },
                            { week: '3', date: 'لاحقًا', title: 'سباق التتابع', content: 'تقسيم فرق – تدريب عملي – منافسة مصغرة.' },
                            { week: '3', date: 'لاحقًا', title: 'بطولة ختامية مبسطة', content: 'دمج الألعاب – تكريم رمزي.' }
                        ],
                        strengths: "تفاعل الطلاب مع الأنشطة التنافسية.\nتنوع الألعاب.",
                        difficulties: "الحاجة لمساحة واسعة وآمنة.",
                        achievements: "مشاركة جميع الطلاب في البطولة الختامية.",
                        remedial_actions: "تبسيط القواعد للطلاب الأصغر سنًا."
                    },
                    'upper-primary': {
                        name: "برنامج مهارات الأولمبياد الرياضي – الصفوف العليا",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "الصفوف العليا",
                        location: "فناء المدرسة",
                        tools: "كرات، أقراص، شواخص، ساعة توقيت",
                        learningOutcomes: "• المشاركة في تحديات أولمبية مدرسية مبسطة، ويُظهر قدرته على الأداء تحت الضغط مع الحفاظ على اللياقة.\n• المشاركة في أداء منافسات رياضية مصغرة من الأولمبياد المدرسي، ويُظهر إبداعا في تطبيق المهارات البدنية تحت ضغوط المنافسة.\n• المشاركة في مسابقات رياضية صغيرة، ويُظهر تطورًا ملحوظا في أدائه البدني مع مرور الوقت.\n• المشاركة في ألعاب تنافسية مصغرة مثل: سباق أو رمي هدف، ويُظهر حماسه لاختيار النشاط الذي يناسب رغبته البدنية.\n• ممارسة الالتزام وتحمل المسؤولية أثناء مشاركته في النشاط الجماعي، من خلال احترام القوانين وتنفيذ مهامه بانتظام.",
                        assessmentMethods: "الملاحظة، تقييم الأداء، سلالم التقدير",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'التهيئة والتعريف بالتصويب', content: 'استقبال الطلاب – تمارين إحماء – تعريف مبسط بالتصويب وأهدافه – مشاهدة عرض قصير – تمرين مسك الكرة.' },
                            { week: '1', date: 'لاحقًا', title: 'وضعية القدمين والتوازن', content: 'شرح عملي لوضع القدمين وثني الركبتين – تطبيق فردي – لعبة مصغرة لثبات التوازن – تهدئة.' },
                            { week: '2', date: 'لاحقًا', title: 'حمل الكرة والتهيئة للتصويب', content: 'تدريب على حمل الكرة بكلتا اليدين – نشاط تبادلي (يمسك/يمرر) – أسئلة تثبيت.' },
                            { week: '2', date: 'لاحقًا', title: 'التصويب من الثبات', content: 'شرح خطوات الرمي من الثبات – تطبيق جماعي – تقسيم الطلاب لمحطات تصويب – تقويم سريع.' },
                            { week: '3', date: 'لاحقًا', title: 'التصويب بعد حركة بسيطة', content: 'تمرين التحرك خطوتين قبل الرمي – تدريب ثنائي (يمرر ثم يصوب) – لعبة تنافسية.' },
                            { week: '3', date: 'لاحقًا', title: 'التصويب من القفز', content: 'شرح نموذج – تطبيق تدريجي بالقفز ثم التصويب – سباق مجموعات.' },
                            { week: '4', date: 'لاحقًا', title: 'مباريات مصغرة (٣ ضد ٣)', content: 'تقسيم فرق – تطبيق المهارات السابقة في لعب جماعي – ملاحظة الأداء ببطاقات تقييم.' },
                            { week: '4', date: 'لاحقًا', title: 'التقييم والعرض', content: 'أداء فردي أمام الزملاء – تقويم بالبطاقات – جلسة تغذية راجعة + تحفيز (شهادات/شارات).' }
                        ],
                        strengths: "روح تنافسية عالية بين الطلاب.\nتطور ملحوظ في الأداء البدني.",
                        difficulties: "تفاوت المستويات البدنية بين الطلاب.",
                        achievements: "تنظيم دوري ناجح بمشاركة الطلاب.",
                        remedial_actions: "تشجيع الطلاب على تحديد أهداف شخصية للتحسن."
                    },
                    'middle': {
                        name: "برنامج مهارات الأولمبياد الرياضي – المرحلة المتوسطة",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "المرحلة المتوسطة",
                        location: "الملعب المدرسي",
                        tools: "حواجز، كرات رمي، شريط قياس",
                        learningOutcomes: "• ممارسة التزام وتحمل للمسؤولية أثناء مشاركته في النشاط الجماعي، من خلال احترام القوانين وتنفيذ مهامه بانتظام.\n• المشاركة في تحديات أولمبية مدرسية، مثل: الجري والرمي، ويُظهر تطورًا واضحًا في لياقته البدنية.\n• التميز في أنشطة أولمبية مصغرة سواء أكانت جماعية أم فردية، ويُظهر قدرة عالية على التنافس والالتزام.\n• المشاركة في أنشطة رياضية أولمبية صغيرة، مثل: الركض أو رمي الكرة، ويُظهر تقدمًا في المهارات البدنية المرتبط بنموه.\n• المشاركة في ألعاب أولمبية مصغرة، ويختار اللعبة التي تستهو يه، ويُظهر استعدادا بدنيا واضحا للمنافسة.\n• إظهار التزام واضح بقوانين المنافسة في الألعاب الأولمبية المصغرة، ويتحمل نتائج أدائه بروح رياضية.",
                        assessmentMethods: "تقييم الأداء الفني، الملاحظة، نتائج المنافسات",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'التعريف بسباق التتابع', content: 'إحماء (جري خفيف) – تعريف باللعبة وقوانينها – تقسيم الطلاب لفرق – مشاهدة فيديو قصير.' },
                            { week: '1', date: 'لاحقًا', title: 'مهارة الجري السريع', content: 'تدريبات على الجري السريع لمسافات قصيرة – تصحيح وضعية الجسم – لعبة "من الأسرع".' },
                            { week: '2', date: 'لاحقًا', title: 'مهارة تسليم العصا', content: 'شرح عملي لطريقة التسليم – تدريب ثنائي – تبادل العصا في منطقة محددة – تكرار جماعي.' },
                            { week: '2', date: 'لاحقًا', title: 'مهارة استلام العصا', content: 'تدريبات على الاستلام دون توقف – تدريب على التوقيت – نشاط جماعي تنافسي.' },
                            { week: '3', date: 'لاحقًا', title: 'الحفاظ على المسار', content: 'تدريب باستخدام أقماع ومسارات محددة – لعبة "من يلتزم بالمسار" – تغذية راجعة.' },
                            { week: '3', date: 'لاحقًا', title: 'التوقيت والدقة', content: 'تدريبات تبادل سريعة – محاولات زمنية بين الفرق – تسجيل النتائج.' },
                            { week: '4', date: 'لاحقًا', title: 'سباقات تجريبية', content: 'سباق تجريبي (٤ × 100م) – استخدام ساعة توقيت – ملاحظات المعلم.' },
                            { week: '4', date: 'لاحقًا', title: 'المسابقة الختامية والتقييم', content: 'تنفيذ سباق كامل بين الفرق – تقييم باستخدام بطاقة الأداء – جلسة ختامية + جوائز.' }
                        ],
                        strengths: "رغبة الطلاب في تحقيق أرقام شخصية جديدة.\nالالتزام العالي بالقواعد.",
                        difficulties: "الحاجة إلى أدوات متخصصة للقياس الدقيق.",
                        achievements: "تحقيق الطلاب لتقدم ملحوظ في المهارات.",
                        remedial_actions: "توفير تغذية راجعة فردية لتحسين الأداء."
                    },
                    'high-2': {
                        name: "برنامج مهارات الأولمبياد الرياضي – المرحلة الثانوية",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "المرحلة الثانوية",
                        location: "الملعب المدرسي المجهز",
                        tools: "حواجز، كرات رمي، شريط قياس، ساعة توقيت إلكترونية",
                        learningOutcomes: "• المشاركة في منافسات أولمبية مصغرة، ويحافظ على مستواه البدني العالي أثناء التحديات، مع الاستمرارية في المشاركة الفعالة.\n• التفوق في الأنشطة الأولمبية المصغرة سواء كانت جماعية أو فردية، ويُظهر رغبة في تطوير مستواه التنافسي.\n• المشاركة في مسابقات أولمبية مدرسية متنوعة، ويُظهر تقدمًا بدنيا وحركيا في الأداء يعكس نضجه البدني وتطور مهاراته الرياضية.\n• المشاركة في مسابقات متنوعة (صغيرة وفردية وجماعية)، ويُظهر حماسه لاختيار النشاط الذي يناسب ميوله البدنية.",
                        assessmentMethods: "تقييم الأداء، تسجيل النتائج والأرقام، الملاحظة المنظمة",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'مقدمة حول الأولمبياد', content: 'تعريف + فيديو قصير.' },
                            { week: '1', date: 'لاحقًا', title: 'سباق الجري السريع', content: 'تدريب عملي – منافسة.' },
                            { week: '2', date: 'لاحقًا', title: 'سباق التتابع', content: 'تقسيم فرق – متابعة الأداء.' },
                            { week: '2', date: 'لاحقًا', title: 'مسابقة الرمي', content: 'تدريب على الدقة – منافسة.' },
                            { week: '3', date: 'لاحقًا', title: 'القفز الطويل', content: 'تدريب عملي – تقييم الأداء.' },
                            { week: '3', date: 'لاحقًا', title: 'القفز العالي المبسط', content: 'منافسة بين الطلاب.' },
                            { week: '4', date: 'لاحقًا', title: 'دوري أولمبي مصغر', content: 'بطولة مدرسية مصغرة.' },
                            { week: '4', date: 'لاحقًا', title: 'التقييم والختام', content: 'مراجعة – تكريم المشاركين.' }
                        ],
                        strengths: "نضج الطلاب البدني والمهاري.\nقدرتهم على التحليل الذاتي للأداء.",
                        difficulties: "الحاجة إلى تجهيزات متقدمة لبعض المسابقات.",
                        achievements: "تنظيم دوري أولمبي مصغر بشكل شبه احترافي.",
                        remedial_actions: "استخدام الفيديو لتحليل الأداء وتقديم التغذية الراجعة."
                    }
                }
            };

            fieldsData.team_sports = {
                name: "مهارات الرياضات الجماعية",
                field: "الرياضة والصحة",
                stages: {
                    'primary': {
                        name: "برنامج مهارات الرياضات الجماعية – الصفوف الأولية",
                        sessions: 6,
                        duration: "270 دقيقة (6 حصص)",
                        target: "الصفوف الأولية",
                        location: "فناء المدرسة، الملعب",
                        tools: "كرات متنوعة، أقماع، شواخص",
                        learningOutcomes: "• المشاركة في أنشطة جماعية تتضمن الجري أو القفز أو التوازن، ويظهر تحسناً فيها.\n• إظهار تميز في المهارات الجماعية الأساسية في بيئة تنافسية مبسطة، مما يشير إلى موهبة جماعية واعدة.\n• المشاركة في أنشطة جماعية تنمي المهارات الحركية الأساسية ويظهر توافقًا بين الحركة والجسم بما يتناسب مع مرحلة نموه.\n• تطبيق قواعد النشاط الجماعي الذي يفضله، مع التزامه بالسلوك الصحي.",
                        assessmentMethods: "الملاحظة، قوائم الشطب",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'التعرف على الألعاب الجماعية', content: 'تهيئة – تعريف مبسط بالألعاب – نشاط استكشافي قصير.' },
                            { week: '1', date: 'لاحقًا', title: 'لعبة الصياد والفريسة', content: 'تدريب عملي – تعزيز التوافق الحركي – منافسة ودية.' },
                            { week: '2', date: 'لاحقًا', title: 'لعبة الكرات الملونة', content: 'تقسيم الطلاب إلى مجموعات – جمع الكرات – تطبيق قواعد بسيطة.' },
                            { week: '2', date: 'لاحقًا', title: 'لعبة المرر واقفز', content: 'تمرير الكرة + القفز – نشاط جماعي للتعاون.' },
                            { week: '3', date: 'لاحقًا', title: 'سباق التتابع', content: 'منافسة بين الفرق – متابعة الأداء – تعزيز الروح الرياضية.' },
                            { week: '3', date: 'لاحقًا', title: 'أولمبياد جماعي مصغر', content: 'دمج الألعاب السابقة – تكريم رمزي – تعزيز السلوك الصحي.' }
                        ],
                        strengths: "استمتاع الطلاب بالألعاب التفاعلية.\nتطور مهارات التعاون.",
                        difficulties: "صعوبة فهم بعض القواعد المعقدة.",
                        achievements: "مشاركة فعالة من جميع الطلاب.",
                        remedial_actions: "تبسيط الألعاب واستخدام الإشارات البصرية."
                    },
                    'upper-primary': {
                        name: "برنامج مهارات الرياضات الجماعية – الصفوف العليا",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "الصفوف العليا",
                        location: "الملعب المدرسي",
                        tools: "كرات قدم، سلة، طائرة، يد، أهداف",
                        learningOutcomes: "• تنفيذ تمارين جماعية تنمي اللياقة البدنية، ويظهر تحسناً ملحوظاً في الأداء البدني أثناء الأنشطة المنظمة.\n• إظهار تميز ملحوظ في الأداء الجماعي أثناء الأنشطة الرياضية، من خلال تطبيق المهارات الأساسية والتفاعل الإيجابي مع الفريق.\n• تعلم مهارات حركية جماعية، ويحسن أداءه الحركي مع تطور جسمه ونموه البدني.\n• المشاركة في أنشطة جماعية متنوعة، ويظهر رغبة واضحة في اختيار اللعبة التي تناسب ميوله، ويلتزم بقواعد الفريق أثناء اللعب.\n• إبداء صفات قيادية أثناء توجيه زملائه وقت تنفيذ الأنشطة الجماعية التعليمية.\n• تحسين لياقته البدنية من خلال المشاركة المنتظمة في تمارين جماعية، ويظهر تطوراً في القوة والسرعة والتوازن.",
                        assessmentMethods: "الملاحظة، تقييم الأداء المهاري، سلالم التقدير",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'التهيئة والاستكشاف', content: 'تعريف الطلاب باللعبة وأدواتها – تمارين إحماء بسيطة – نشاط تعارفي بالكرة.' },
                            { week: '1', date: 'لاحقًا', title: 'مهارة الجري بالكرة', content: 'شرح مهارة الجري مع الكرة – تمرين بين الأقماع – التركيز على إبقاء الكرة قريبة – منافسة بين المجموعات.' },
                            { week: '2', date: 'لاحقًا', title: 'التمرير بأنواعه', content: 'تدريب على التمرير القصير والطويل باستخدام القدم الداخلية والخارجية – ألعاب جماعية للتمرير المتتابع.' },
                            { week: '2', date: 'لاحقًا', title: 'الاستلام والسيطرة', content: 'توضيح طرق الاستلام (بالقدم، الفخذ، الصدر) – تدريب ثنائي (ممرات تمرير واستلام).' },
                            { week: '3', date: 'لاحقًا', title: 'المراوغة وتغيير الاتجاه', content: 'تدريبات مراوغة بين الأقماع – تحديات ثنائية (مهاجم/مدافع) – لعب حر مع مراعاة القوانين.' },
                            { week: '3', date: 'لاحقًا', title: 'التسديد نحو المرمى', content: 'تعليم خطوات التسديد الصحيح – تدريب فردي على مرمى صغير – منافسة "الهداف".' },
                            { week: '4', date: 'لاحقًا', title: 'اللعب الجماعي', content: 'تقسيم الفرق – تنظيم مباراة قصيرة – تطبيق التعاون والالتزام بالخطة – مناقشة الأدوار داخل الفريق.' },
                            { week: '4', date: 'لاحقًا', title: 'الاستعراض والتقييم', content: 'مباراة تطبيقية – ملاحظة الأداء باستخدام بطاقة تقييم – مناقشة القيم (الروح الرياضية، التعاون، الانضباط).' }
                        ],
                        strengths: "ظهور مهارات قيادية لدى بعض الطلاب.\nحماس كبير للمنافسات.",
                        difficulties: "التركيز على اللعب الفردي بدلًا من الجماعي أحيانًا.",
                        achievements: "تنظيم دوري ناجح بمشاركة فعالة.",
                        remedial_actions: "التأكيد على أهمية التمرير واللعب كفريق."
                    },
                    'middle': {
                        name: "برنامج مهارات الرياضات الجماعية – المرحلة المتوسطة",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "المرحلة المتوسطة",
                        location: "الملعب المدرسي",
                        tools: "كرات قدم، سلة، طائرة، سبورة تكتيك",
                        learningOutcomes: "• إظهار مهارات مميزة في اللعب الجماعي، مما يدل على موهبته في العمل ضمن الفريق.\n• تطبيق مهارات التوازن والتناسق الحركي ضمن مواقف جماعية حقيقية، ويظهر قدرة متنامية على أداء الحركات بانسيابية وتكامل بدني.\n• اختيار لعبة جماعية يفضلها، ويشارك فيها بنشاط، ويظهر احترامه لقواعد اللعب وتعاونه مع الفريق.\n• أداء مجموعة من المهارات وخطط اللعب في منافسات.",
                        assessmentMethods: "تقييم الأداء المهاري والتكتيكي، الملاحظة",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'التهيئة والتعرف على التصويب', content: 'إحماء – مناقشة أهمية التصويب – نشاط تسديد عشوائي للكرات.' },
                            { week: '1', date: 'لاحقًا', title: 'خطوات التصويب الصحيحة', content: 'شرح مكونات الأداء (قدم ارتكاز – سحب الرجل – الضربة – متابعة الحركة) – تطبيق فردي.' },
                            { week: '2', date: 'لاحقًا', title: 'التصويب باستخدام أجزاء مختلفة من القدم', content: 'تدريب عملي (بمشط القدم – بوجه القدم الداخلي) – ملاحظات فورية من المعلم.' },
                            { week: '2', date: 'لاحقًا', title: 'التصويب الموجه', content: 'تسديد نحو أهداف مرسومة (مربعات/أقماع) – منافسة فردية.' },
                            { week: '3', date: 'لاحقًا', title: 'التصويب من وضع الاستلام', content: 'تمرين: تمرير من زميل ثم تسديد مباشرة – تدريب ثنائي وجماعي.' },
                            { week: '3', date: 'لاحقًا', title: 'التدريب الجماعي', content: 'تقسيم الطلاب إلى مجموعات – أدوار (مشارك – مشجع – مراقب) – منافسة بين المجموعات.' },
                            { week: '4', date: 'لاحقًا', title: 'اللعب التطبيقي', content: 'مباراة قصيرة تطبق مهارة التصويب – تحفيز (هداف الفريق) – تعزيز الروح الرياضية.' },
                            { week: '4', date: 'لاحقًا', title: 'الاستعراض والتقييم', content: 'مراجعة الخطوات – أداء فردي أمام الزملاء – تقييم باستخدام بطاقات الملاحظة – تعزيز القيم (الإصرار – الانضباط – الأمانة).' }
                        ],
                        strengths: "بداية فهم الطلاب للجوانب التكتيكية.\nتطور المهارات الفردية والجماعية.",
                        difficulties: "صعوبة تطبيق الخطط التكتيكية تحت ضغط اللعب.",
                        achievements: "تنفيذ بعض الجمل التكتيكية البسيطة بنجاح.",
                        remedial_actions: "استخدام سبورة الشرح وتكرار التدريبات."
                    },
                    'high-2': {
                        name: "برنامج مهارات الرياضات الجماعية – المرحلة الثانوية",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "المرحلة الثانوية",
                        location: "الملعب المدرسي",
                        tools: "كرات قدم، سلة، طائرة، شواخص، سبورة تكتيك",
                        learningOutcomes: "• تحسين مستوى لياقته البدنية عبر ممارسة الأنشطة الجماعية، ويظهر تطوراً واضحاً في السرعة، والقوة، والمرونة.\n• إبراز موهبته في أداء المهارات الجماعية مثل التمرير والهجوم والدفاع، أثناء ممارسة الألعاب الجماعية.\n• تطوير أدائه في الألعاب الجماعية من خلال تحسين التناسق والسرعة والقدرة على قراءة اللعب، بما يتناسب مع تطوره البدني وقدراته الحركية الجماعية.\n• اختيار لعبة جماعية تناسب ميوله، ويظهر التزامه بالتعاون والعمل الجماعي؛ لتحقيق الفوز مع زملائه.",
                        assessmentMethods: "تقييم الأداء، تحليل المباريات، الملاحظة المنظمة",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'مقدمة عن الألعاب الجماعية', content: 'عرض تعريفي + نقاش القيم الرياضية.' },
                            { week: '1', date: 'لاحقًا', title: 'كرة القدم', content: 'تدريب على الهجوم والدفاع – مباراة مصغرة.' },
                            { week: '2', date: 'لاحقًا', title: 'كرة السلة', content: 'تنفيذ خطة دفاع وهجوم – مباراة قصيرة.' },
                            { week: '2', date: 'لاحقًا', title: 'كرة الطائرة', content: 'تدريب عملي – مباراة ودية.' },
                            { week: '3', date: 'لاحقًا', title: 'التدريب التكتيكي الجماعي', content: 'تقسيم الفرق – تطبيق خطط لعب.' },
                            { week: '3', date: 'لاحقًا', title: 'مباريات تجريبية', content: 'تنظيم مباريات قصيرة – متابعة التحكيم.' },
                            { week: '4', date: 'لاحقًا', title: 'دوري ختامي', content: 'بطولة مدرسية مصغرة.' },
                            { week: '4', date: 'لاحقًا', title: 'التقييم والختام', content: 'مراجعة المهارات – تكريم المشاركين.' }
                        ],
                        strengths: "قدرة الطلاب على فهم وتطبيق خطط اللعب.\nمستوى عالٍ من المهارة والوعي التكتيكي.",
                        difficulties: "الحاجة إلى تحكيم دقيق ومنظم للمباريات.",
                        achievements: "تطبيق خطط لعب معقدة نسبيًا.\nإدارة الطلاب للمباريات تحكيميًا وتنظيميًا.",
                        remedial_actions: "إشراك الطلاب في عملية التحكيم والتنظيم."
                    }
                }
            };
            
            fieldsData.esports = {
                name: "مهارات الرياضات الإلكترونية   ",
                field: "الرياضة والصحة",
                stages: {
                    'primary': {
                        name: "مهارات الرياضات الإلكترونية – الصفوف الأولية",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "الصفوف الأولية",
                        location: "غرفة مصادر التعلم، معمل الحاسب",
                        tools: "أجهزة ألعاب (Nintendo Switch)، لعبة Mario Kart 8 Deluxe، جهاز عرض",
                        learningOutcomes: "• المشاركة في ألعاب إلكترونية تفاعلية تتطلب حركة بدنية مستمرة، ويُظهر تحكمًا بصريًا حركيًا يساعده على الحفاظ على استمرارية النشاط وتحقيق الاستفادة الصحية المرجوة.\n• التفاعل بمهارة في ألعاب إلكترونية تعتمد على الحركة، ويُظهر تحكمًا عاليًا في التوافق الحركي والبصري، مما يشير إلى استعداد مبكر للتميز في هذا النوع من الأنشطة.\n• التفاعل مع ألعاب إلكترونية تتطلب حركة بدنية بسيطة، ويُظهر تحكمًا وتطورًا في التناسق البصري الحركي بما يتناسب مع عمره الحركي والنفسي.\n• اختيار لعبة إلكترونية حركية تستهويه، ويشارك فيها بفعالية، ويُظهر تحكمًا وتوازنًا حركيًا أثناء الأداء، مع الالتزام بالزمن المخصص للنشاط.",
                        assessmentMethods: "الملاحظة، قوائم الشطب",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'التعريف بلعبة Mario Kart 8 Deluxe', content: 'شرح فكرة اللعبة – طريقة التحكم – عرض فيديو مبسط – مناقشة القواعد الأساسية.' },
                            { week: '1', date: 'لاحقًا', title: 'المهارات الأساسية في اللعب', content: 'تدريب عملي على التحكم بالشخصية – توجيه باستخدام أزرار الحركة – محاكاة سباق قصير.' },
                            { week: '2', date: 'لاحقًا', title: 'قواعد السلامة في اللعب', content: 'نقاش حول الاستخدام الآمن – تحديد مدة اللعب – ربط الصحة بالحركة.' },
                            { week: '2', date: 'لاحقًا', title: 'التعاون والعمل الجماعي', content: 'تكوين فرق – مشاركة الأدوار – تنظيم سباق جماعي مبسط.' },
                            { week: '3', date: 'لاحقًا', title: 'تطبيق استراتيجيات بسيطة للفوز', content: 'تجربة حيل أساسية (اختيار المسار – السرعة) – مناقشة النتائج.' },
                            { week: '3', date: 'لاحقًا', title: 'تجربة سباق تنافسي قصير', content: 'تقسيم الطلاب لمجموعات – تطبيق مهارات التوازن والسرعة.' },
                            { week: '4', date: 'لاحقًا', title: 'توثيق النشاط', content: 'استخدام الرسوم/الوسائل الرقمية لتوثيق المشاركة – رسم أو كتابة تجربة اللعب.' },
                            { week: '4', date: 'لاحقًا', title: 'المسابقة النهائية المبسطة', content: 'تنفيذ سباق جماعي نهائي – توزيع شهادات مشاركة – مناقشة الدروس المستفادة.' }
                        ],
                        strengths: "حماس شديد من الطلاب.\nتطور سريع في مهارات التحكم.",
                        difficulties: "الحاجة لتنظيم الوقت والأدوار بدقة.",
                        achievements: "مشاركة الجميع بروح رياضية عالية.",
                        remedial_actions: "التأكيد على أهمية النشاط البدني المصاحب."
                    },
                    'upper-primary': {
                        name: "مهارات الرياضات الإلكترونية – الصفوف العليا",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "الصفوف العليا",
                        location: "غرفة مصادر التعلم، معمل الحاسب",
                        tools: "أجهزة ألعاب (Nintendo Switch)، لعبة Mario Kart 8 Deluxe، جهاز عرض",
                        learningOutcomes: "• التفاعل مع ألعاب إلكترونية حركية تحاكي التمرين البدني، ويُظهر انخراطًا مستمرًا في التمرين مع الحفاظ على تحكم بصري حركي جيد.\n• إظهار قدرة مميزة على التحكم بحركاته والتفكير السريع أثناء لعب الألعاب الإلكترونية الرياضية، مما يدل على امتلاكه لموهبة تجمع بين التفكير الذهني والمهارة الحركية.\n• المشاركة في ألعاب إلكترونية تتطلب حركة بدنية، ويُظهر تحسنًا في التنسيق بين حركات جسمه مع تطور مهاراته البدنية.\n• اختيار لعبة إلكترونية ذات طابع حركي أو ذهني، ويُظهر تحكمًا جيدًا بين حركته وتفكيره أثناء اللعب، مع التزامه بالزمن المحدد للنشاط.\n• الالتزام بقواعد الألعاب الإلكترونية التفاعلية، ويُظهر احترامًا للوقت والتعليمات، ويتحمل مسؤولية أدائه وسلوكه أثناء اللعب.",
                        assessmentMethods: "الملاحظة، تقييم الأداء في السباقات",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'مقدمة عن الألعاب الإلكترونية الرياضية', content: 'تعريف اللعبة – مناقشة الفرق بين اللعب الترفيهي والتعليمي – عرض قواعد أساسية.' },
                            { week: '1', date: 'لاحقًا', title: 'استراتيجيات اللعب الأولية', content: 'تدريب على التحكم بالشخصية – مناقشة التحديات – تطبيق عملي.' },
                            { week: '2', date: 'لاحقًا', title: 'أهمية السلامة الرقمية', content: 'نقاش حول الاستخدام الأخلاقي والآمن – ربط الصحة بالحركة.' },
                            { week: '2', date: 'لاحقًا', title: 'اللعب التعاوني', content: 'تكوين فرق – مناقشة التعاون – تنفيذ سباق جماعي.' },
                            { week: '3', date: 'لاحقًا', title: 'تحليل الأداء', content: 'مشاهدة تسجيل قصير للعب الطلاب – مناقشة نقاط القوة والضعف.' },
                            { week: '3', date: 'لاحقًا', title: 'التنافس البنّاء', content: 'تنظيم سباق صغير – تشجيع الروح الرياضية – التزام القوانين.' },
                            { week: '4', date: 'لاحقًا', title: 'استخدام التقنية في التوثيق', content: 'تدريب على التقاط صور أو مقاطع قصيرة – إعداد ملف إنجاز.' },
                            { week: '4', date: 'لاحقًا', title: 'المسابقة النهائية', content: 'بطولة مصغرة بين الطلاب – عرض النتائج – نقاش عن الاستفادة المستقبلية.' }
                        ],
                        strengths: "القدرة على تعلم المهارات المتقدمة بسرعة.\nالالتزام بقواعد السلامة.",
                        difficulties: "المنافسة الشديدة قد تؤدي إلى بعض التوتر.",
                        achievements: "تطبيق مهارات متقدمة مثل الانجراف بشكل فعال.",
                        remedial_actions: "التأكيد المستمر على الروح الرياضية واحترام المنافسين."
                    },
                    'middle': {
                        name: "مهارات الرياضات الإلكترونية – المرحلة المتوسطة",
                        sessions: 6,
                        duration: "270 دقيقة (6 حصص)",
                        target: "المرحلة المتوسطة",
                        location: "معمل الحاسب",
                        tools: "أجهزة ألعاب، لعبة Mario Kart 8 Deluxe، جهاز عرض",
                        learningOutcomes: "• المشاركة في ألعاب إلكترونية حركية، ويُظهر استمرارية في الأداء وتحكمًا جيدًا في التوازن بين الحركة والتفكير.\n• إبراز مهارته في الألعاب الإلكترونية الحركية أو الذهنية، من خلال دقة حركاته وسرعة استجابته أثناء اللعب.\n• التفاعل مع ألعاب إلكترونية حركية، ويحسن من تناسقه الحركي البصري بطريقة تتناسب مع نموه البدني.\n• اختيار لعبة إلكترونية ذات طابع رياضي، ويشارك فيها بانتظام، ويُظهر مهارات حركية أو ذهنية أثناء اللعب.\n• إتقان قواعد الألعاب الإلكترونية ويواكب تطورها المستمر.",
                        assessmentMethods: "الملاحظة، تحليل الأداء (Time Trials)، نتائج البطولة",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'التعريف بلعبة Mario Kart 8 Deluxe', content: 'عرض أهداف اللعبة – القواعد الأساسية – القوانين – المسؤوليات.' },
                            { week: '1', date: 'لاحقًا', title: 'التدريب على المهارات', content: 'خطوط السباق – الانجراف – إدارة العناصر – تجنب الاصطدامات.' },
                            { week: '2', date: 'لاحقًا', title: 'قواعد السلامة', content: 'وضعية الجلوس – الإضاءة – فترات الراحة – ضبط الانفعالات.' },
                            { week: '2', date: 'لاحقًا', title: 'تجارب وقت فردية', content: 'Time Trials – مقارنة النتائج – خطة تحسين فردية.' },
                            { week: '3', date: 'لاحقًا', title: 'سباقات جماعية', content: 'تقسيم الطلاب لفرق – سباقات تنافسية – تقييم الالتزام.' },
                            { week: '3', date: 'لاحقًا', title: 'البطولة الختامية', content: 'دوري مبسط – مراحل إقصائية – إعلان النتائج.' }
                        ],
                        strengths: "القدرة على التحليل ووضع خطط للتحسين.\nالانضباط العالي في تطبيق قواعد السلامة.",
                        difficulties: "الحاجة إلى ضبط الانفعالات أثناء المنافسات الشديدة.",
                        achievements: "تحسن ملحوظ في أزمنة السباقات الفردية.",
                        remedial_actions: "جلسات نقاش قصيرة حول إدارة الانفعال والروح الرياضية."
                    },
                    'high-2': {
                        name: "مهارات الرياضات الإلكترونية – المرحلة الثانوية",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "المرحلة الثانوية",
                        location: "معمل الحاسب المجهز",
                        tools: "أجهزة ألعاب، لعبة Mario Kart 8 Deluxe، جهاز عرض، أدوات لتوثيق النتائج",
                        learningOutcomes: "• المشاركة في ألعاب إلكترونية حركية، ويُظهر مهارة في التناسق الحركي والاستمرارية بالنشاط بما يعزز صحته البدنية.\n• إظهار قدراته الذهنية والحركية أثناء ممارسة الألعاب الإلكترونية الرياضية، من خلال دقة الحركة وسرعة التفكير.\n• تطوير التآزر الحركي والبصري خلال الألعاب الإلكترونية التفاعلية، ويُظهر تقدمًا ملحوظًا في التحكم بالحركة ودقة الاستجابة.\n• اختيار لعبة إلكترونية تفاعلية حركية أو ذهنية تناسب ميوله، ويُظهر التزامًا بالقواعد وتحكمًا في أدائه داخل اللعبة.",
                        assessmentMethods: "تحليل الأداء، التقييم الذاتي وتقييم الزملاء، نتائج البطولة",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'التعريف بلعبة Mario Kart 8 Deluxe', content: 'أهداف النشاط – القواعد – طريقة اللعب – مسؤوليات المنظم.' },
                            { week: '1', date: 'لاحقًا', title: 'مهارات متقدمة', content: 'اختيار المركبات – قراءة الخريطة – استخدام العناصر بفعالية – Mini/Ultra Drift.' },
                            { week: '2', date: 'لاحقًا', title: 'قواعد السلامة', content: 'السلوك الرقمي – إدارة الانفعال – الروح الرياضية – استخدام الأجهزة بمسؤولية.' },
                            { week: '2', date: 'لاحقًا', title: 'تجارب وقت وتحليل', content: 'Time Trials – تحليل خط السباق – خطة تحسين.' },
                            { week: '3', date: 'لاحقًا', title: 'مواجهات فرق', content: 'أدوار (قائد/مدافع/مهاجم) – خطط لعب – متابعة الأداء.' },
                            { week: '3', date: 'لاحقًا', title: 'دوري مصغر', content: 'تنظيم مباريات – تحكيم طلابي – توثيق النتائج.' },
                            { week: '4', date: 'لاحقًا', title: 'الأدوار الإقصائية', content: 'ربع/نصف نهائي – التزام بالقواعد – مراجعة الأداء.' },
                            { week: '4', date: 'لاحقًا', title: 'النهائي والتقييم', content: 'مباراة نهائية – إعلان الفائز – تقويم ذاتي وزملائي.' }
                        ],
                        strengths: "القدرة على التخطيط الاستراتيجي وتوزيع الأدوار.\nالنضج في التعامل مع الفوز والخسارة.",
                        difficulties: "يتطلب تنظيمًا عاليًا للبطولة والأدوار الإقصائية.",
                        achievements: "إدارة الطلاب للبطولة بشكل كامل وتحكيم المباريات.",
                        remedial_actions: "توفير نماذج جاهزة لجداول المباريات والنتائج."
                    }
                }
            };

            fieldsData.mental_sports = {
                name: "مهارات الرياضات الذهنية",
                field: "الرياضة والصحة",
                stages: {
                    'primary': {
                        name: "مهارات الرياضات الذهنية – الصفوف الأولية",
                        sessions: 6,
                        duration: "270 دقيقة (6 حصص)",
                        target: "الصفوف الأولية",
                        location: "قاعة النشاط، الفصل الدراسي",
                        tools: "بطاقات صور وكلمات، شارات تحفيزية",
                        learningOutcomes: "• ممارسـة ألعـاب ذهنيـة وحركيـة تُحفـز النشـاط العقلـي والجسـدي، ويُظهـر خلالهـا تحسـنًا فـي التركيز والجهـد البدنـي المرتبـط بالحركـة.\n• إظهـار تميـز فـي حـل مشـكلات بسـيطة داخـل الألعـاب الذهنيـة الحركيـة، ويُبـدي خلالهـا مرونـة وتفكيـرًا سـريعا.\n• ممارسـة ألعـاب ذهنيـة ذات بُعـد حركـي، تُحفّز التفكيـر الحركـي وتُظهـر تقدّمًا فـي مهـارات التناسـق والاستجابة.\n• اكتشــاف ألعــاب ذهنيــة تُحفّــز تركيــزه، ويُطبــق اســتراتيجيات بســيطة تســاعده عــلى حــل التحديــات داخــل اللعبــة.",
                        assessmentMethods: "الملاحظة، ملف الإنجاز",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'حركة في صورة (1)', content: 'تهيئة: لعبة «مرآتي الحركية». عرض: بطاقات أوضاع جسدية. نشاط تطبيقي: تقليد فردي/جماعي.' },
                            { week: '1', date: 'لاحقًا', title: 'حركة في صورة (2)', content: 'استكمال نشاط «من يقلد أولًا؟». تهدئة: تنفس ومشاركة لفظية للحركة المفضلة.' },
                            { week: '2', date: 'لاحقًا', title: 'الأسرع استجابة', content: 'تهيئة: أوامر حركية سريعة. عرض: ربط الحركة بالرمز. تطبيقي: لعبة «بطاقة وسرعة».' },
                            { week: '2', date: 'لاحقًا', title: 'سلسلة الحركات (1)', content: 'تهيئة: تنفيذ حركتين متتاليتين. عرض: بطاقات تسلسل (اجلس → قف → اقفز).' },
                            { week: '3', date: 'لاحقًا', title: 'سلسلة الحركات (2)', content: 'تطبيقي: ترتيب وتنفيذ + لعبة «الحركة الناقصة». تهدئة: تمرين فردي.' },
                            { week: '3', date: 'لاحقًا', title: 'أنا أختار وأُبدع', content: 'تهيئة: استرجاع الحركة المفضلة. تطبيقي: رسم/تمثيل للحركة. ختام: عرض الأعمال.' }
                        ],
                        strengths: "تفاعل الطلاب مع الألعاب التي تجمع الحركة والذهن.\nتحسن ملحوظ في سرعة الاستجابة.",
                        difficulties: "تشتت انتباه بعض الطلاب بسهولة.",
                        achievements: "قدرة الطلاب على تذكر وتنفيذ سلاسل حركية.",
                        remedial_actions: "استخدام ألعاب قصيرة وسريعة للحفاظ على التركيز."
                    },
                    'upper-primary': {
                        name: "مهارات الرياضات الذهنية – الصفوف العليا (البلوت)",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "الصفوف العليا",
                        location: "قاعة النشاط",
                        tools: "أوراق لعب البلوت، سبورة للشرح، شارات تحفيزية",
                        learningOutcomes: "• ممارسـة إسـتراتيجيات تفكيـر متنوعـة أثنـاء مشـاركته فـي ألعـاب ذهنيـة جماعيـة، ويُظهـر خلالهـا قـدرة عـلى التخطيـط المسـبق واتخـاذ القـرارات بمرونـة.\n• تحليـل مواقـف اللعـب الذهنـي بدقـة عاليـة، ويُخطـط تحركاتـه بشـكل إسـτραتيجي منظـم، ممـا يُظهـر موهبـة ذهنيـة رياضيـة.\n• التفكيـر والتركيـز بفاعليـة أثنـاء ممارسـة الألعـاب الذهنيـة الحركيـة.\n• اكتشــاف أنــواع متعــددة مــن الألعــاب الذهنيــة، ويُطبــق خلالهــا خططًا مبسطة.\n• إظهـار مهـارات القيـادة أو التعـاون أو التواصـل أثنـاء مشـاركته فـي ألعـاب ذهنيـة جماعيـة.",
                        assessmentMethods: "الملاحظة، تحليل مواقف اللعب، التقييم الذاتي",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'أتعرف إلى لعبة البلوت (1)', content: 'تهيئة: «تخمين الورقة». تطبيقي: تقسيم مجموعات وتجربة أولية موجهة.' },
                            { week: '1', date: 'لاحقًا', title: 'أتعرف إلى لعبة البلوت (2)', content: 'تحفيز: «لماذا اخترت هذه الورقة؟». تهدئة: عصف ذهني: الفرق بين الصن والحكم.' },
                            { week: '2', date: 'لاحقًا', title: 'نلعب معًا ونتعلم (1)', content: 'تهيئة: «سؤال وورقة». عرض: استراتيجيات بسيطة (اللعب الآمن/التعاون/التمويه).' },
                            { week: '2', date: 'لاحقًا', title: 'نلعب معًا ونتعلم (2)', content: 'تطبيقي: جولة كاملة مع تبديل الأدوار. تهدئة: «ما الجديد الذي تعلمته؟».' },
                            { week: '3', date: 'لاحقًا', title: 'مباريات بلوت وتطوير الخطة (1)', content: 'تهيئة: «اسأل خصمك». عرض: نقاش إستراتيجيات التمويه وقراءة الخصم.' },
                            { week: '3', date: 'لاحقًا', title: 'مباريات بلوت وتطوير الخطة (2)', content: 'تطبيقي: مباريات خروج مغلوب + تحليل أداء. تهدئة: اقتراح خطة للمباراة التالية.' },
                            { week: '4', date: 'لاحقًا', title: 'أقيّم نفسي وأعرض ما تعلمت (1)', content: 'تهيئة: «ما أول شيء ستغيّره؟». عرض: مراجعة المهارات + شرح التقييم الذاتي.' },
                            { week: '4', date: 'لاحقًا', title: 'أقيّم نفسي وأعرض ما تعلمت (2)', content: 'تهدئة: مناقشة أخطاء اللعب وكيفية التعامل معها.' }
                        ],
                        strengths: "تنمية مهارات التفكير الاستراتيجي والعمل الجماعي.\nحماس الطلاب لتعلم لعبة شائعة.",
                        difficulties: "صعوبة فهم بعض القواعد المتقدمة في البداية.",
                        achievements: "قدرة الطلاب على لعب جولات كاملة وتطبيق استراتيجيات بسيطة.",
                        remedial_actions: "اللعب بجولات تدريبية مكثفة مع توجيه مستمر."
                    },
                    'middle': {
                        name: "مهارات الرياضات الذهنية – المرحلة المتوسطة (البلوت)",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "المرحلة المتوسطة",
                        location: "قاعة النشاط",
                        tools: "أوراق لعب البلوت، سبورة للشرح، نماذج تقييم",
                        learningOutcomes: "• ممارسـة ألعـاب ذهنيـة تتضمـن حـركات تسـاعد عـلى التفكيـر والتحليـل.\n• إتقـان مهـارات متنوعـة فـي الألعـاب الذهنيـة، ويتخـذ قـرارات صحيحـة وسـريعة، بمـا يـدل عـلى امتـلاك موهبـة ذهنيـة متقدمـة.\n• ممارسـة ألعـاب ذهنيـة تعتمـد عـلى التركيـز المصحـوب بالحركـة، ويُظهـر خلالهـا تحسـنًا فـي سـرعة التفكيـر.\n• تجربـة مجموعـة متنوعـة مـن الألعـاب الذهنيـة، ويُظهـر فهمًا لقواعدهـا وتفكيـرًا منطقيًا.\n• تطويـر مهاراتـه فـي الألعـاب الذهنيـة بشـكل متـدرج مـن خـلال التعـرف إلى تكتيـكات جديـدة.",
                        assessmentMethods: "الملاحظة أثناء اللعب، تحليل القرارات، التقييم الذاتي",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'أتعرف إلى لعبة البلوت', content: 'تهيئة: نشاط رمزي لتمييز رموز البطاقات وسؤال تفاعلي. تنفيذ: شرح مبسّط للقواعد وتوزيع الأدوار ثم جولة تجريبية قصيرة. ختام: مشاركة سريعة + شارة تحفيز.' },
                            { week: '1', date: 'لاحقًا', title: 'ألعب وأحلل بذكاء', content: 'تهيئة: سيناريو "خمن قرار الخصم" لتحفيز التوقع. تنفيذ: جولة لعب مع توقفات قصيرة لتحليل قرارات اللعب وتسجيل ملاحظات. ختام: تمرين "فكر بصوت" وتثبيت ملاحظة.' },
                            { week: '2', date: 'لاحقًا', title: 'أخطط وأربك الخصم', content: 'تهيئة: تمرين تحليل موقف (صادق أم تمويه). تنفيذ: جولات تكتيكية مع تبادل الأدوار وتجريب استراتيجيات تمويه. ختام: كتابة خطة مبسطة للجولة القادمة.' },
                            { week: '2', date: 'لاحقًا', title: 'أنافس وأقيم أدائي', content: 'تهيئة: شرح نظام البطولة ومعايير التقييم. تنفيذ: بطولة مصغّرة مع تدوين النقاط وتحليل سريع للأداء. ختام: عرض نتائج قصيرة وتقييم ذاتي.' },
                            { week: '3', date: 'لاحقًا', title: 'مباريات وتطوير الخطة (1)', content: 'تهيئة: نشاط "اسأل خصمك" لتبادل الملاحظات. تنفيذ: مباريات رسمية بنظام خروج المغلوب مع ملاحظات تكتيكية من المعلم. ختام: اقتراح تعديلات على الخطة.' },
                            { week: '3', date: 'لاحقًا', title: 'مباريات وتطوير الخطة (2)', content: 'تهيئة: مراجعة الاستراتيجيات المقترحة. تنفيذ: استكمال مباريات مع تطبيق التحسينات وتسجيل الأداء بالأرقام/النقاط. ختام: تغذية راجعة عملية لكل فريق.' },
                            { week: '4', date: 'لاحقًا', title: 'أقيم نفسي', content: 'تهيئة: تمرين "ما أول شيء سأغيره؟" كمقدمة للتقييم. تنفيذ: تقييم ذاتي من الطالب + تقييم زميل (بطاقة ملاحظة قصيرة). ختام: مشاركة دروس مكتسبة وخطة تحسين شخصية.' },
                            { week: '4', date: 'لاحقًا', title: 'أعرض ما تعلمت + توثيق', content: 'تهيئة: تحضير سريع للعروض الفردية/الجماعية. تنفيذ: عرض نتائج واستراتيجيات مختارة أمام الزملاء وتوثيق صور/ملاحظات. ختام: توزيع شارات/بطاقات تحفيزية وتسجيل في ملف الإنجاز.' }
                        ],
                        strengths: "تطور سريع في فهم استراتيجيات اللعب.\nالقدرة على تحليل قرارات الخصم.",
                        difficulties: "الحاجة إلى وقت إضافي لتنظيم البطولات.",
                        achievements: "تنظيم بطولة مصغرة وتقييم الطلاب لأدائهم.",
                        remedial_actions: "يمكن توسيع الخطة إلى 8 حصص عبر تكثيف الجولات التطبيقية والبطولات."
                    },
                    'high-2': {
                        name: "مهارات الرياضات الذهنية – المرحلة الثانوية (جاكارو)",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "المرحلة الثانوية",
                        location: "قاعة النشاط",
                        tools: "لوحات وأدوات لعبة جاكارو، أدوات تقييم",
                        learningOutcomes: "• ممارسـة مجموعـة مـن الألعـاب الذهنيـة، ويُحافـظ عـى اسـتمرارية التفكيـر الإيجابـي والتركيـز.\n• تحليـل مواقـف اللعـب الذهنـي بذكاء، واتخـاذ قـرارات سـريعة ومدروسـة تعكـس قدرتـه عـلى التفكيـر المنطقـي والتخطيـط الإسـتراتيجي.\n• توظيـف مهـارات التفكيـر العليـا، ويُظهـر مـن خلالهـا تطـورًا ملحوظًا فـي دقـة التفكيـر وسـرعة الاسـتجابة.\n• تجربـة عـدة ألعـاب ذهنيـة متنوعـة، ويُظهـر إبداعًا شخصيًا فـي استخدام الخطط والإستراتيجيات.",
                        assessmentMethods: "تحليل استراتيجي، الملاحظة، نتائج البطولة",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'أتعرف إلى لعبة جاكارو (1)', content: 'تهيئة: نقاش تمهيدي (لعبت ألعاب تفكير؟ الحظ أم التخطيط؟). تطبيقي: تدريب على الأدوات.' },
                            { week: '1', date: 'لاحقًا', title: 'أتعرف إلى لعبة جاكارو (2)', content: 'تطبيقي: جولة تجريبية قصيرة. تهدئة: «ورقتي المفضلة ولماذا؟».' },
                            { week: '2', date: 'لاحقًا', title: 'أُخطّط مع فريقي (1)', content: 'تهيئة: سيناريو اختيارات «لو معك هذه الأوراق، ماذا تفعل؟».' },
                            { week: '2', date: 'لاحقًا', title: 'أُخطّط مع فريقي (2)', content: 'تطبيقي: جولة إستراتيجية مع أسئلة توجيهية. تهدئة: «أفضل قرار اليوم».' },
                            { week: '3', date: 'لاحقًا', title: 'أُنافس وأُحلّل (1)', content: 'تهيئة: مراجعة قوانين + سيناريوهات تحليل سريعة. عرض: أدوات التقييم.' },
                            { week: '3', date: 'لاحقًا', title: 'أُنافس وأُحلّل (2)', content: 'تطبيقي: جولات تنافسية حقيقية + تحليل بعد كل جولة.' },
                            { week: '4', date: 'لاحقًا', title: 'بطولة جاكارو والتكريم (1)', content: 'تهيئة: مراجعة إستراتيجية. تطبيقي: بطولة فردية وثنائية.' },
                            { week: '4', date: 'لاحقًا', title: 'بطولة جاكارو والتكريم (2)', content: 'تهدئة: تقييم ذاتي + جوائز وشهادات.' }
                        ],
                        strengths: "مستوى عالٍ من التفكير التحليلي والاستراتيجي.\nتنمية مهارات اتخاذ القرار تحت الضغط.",
                        difficulties: "تتطلب اللعبة تركيزًا عاليًا قد لا يتوفر لدى الجميع.",
                        achievements: "تنظيم بطولة ناجحة فردية وثنائية.",
                        remedial_actions: "تشجيع اللعب الثنائي لتبادل الخبرات بين الطلاب."
                    }
                }
            };

            fieldsData.individual_sports = {
                name: "مهارات الرياضات الفردية",
                field: "الرياضة والصحة",
                stages: {
                    'primary': {
                        name: "مهارات الرياضات الفردية – الصفوف الأولية (القفز)",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "الصفوف الأولية",
                        location: "فناء المدرسة، صالة رياضية",
                        tools: "حواجز إسفنجية، أطواق أرضية، حبال، بساط هبوط",
                        learningOutcomes: "• أداء نشـاط بدنـي فـردي لمـدة تتـراوح بيـن خمـس إلى عشـر دقائـق متواصلـة.\n• أداء مهـارات فرديـة بدقـة وتحكـم وانضبـاط حركـي.\n• تنفيـذ حـركات فرديـة منظمـة، تُظهـر تحكمـه فـي حركـة جسـمه.\n• تجربـة مجموعـة متنوعـة مـن الأنشـطة الفرديـة، ويُتقـن المهـارات الأساسـية.",
                        assessmentMethods: "الملاحظة، قوائم الشطب، ملف الإنجاز",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'الاستكشاف والتهيئة', content: 'التهيئة: لعبة "اقفز إذا سمعت…" + حركات إيقاعية بسيطة. التطبيق: شرح عملي من المعلم لطريقة القفز الصحيحة، ثم قفز في المكان بشكل فردي وجماعي. نشاط إضافي: قفز فوق خطوط مرسومة على الأرض. التهدئة: تمدد للأطراف وتمارين تنفس عميق.' },
                            { week: '1', date: 'لاحقًا', title: 'تطبيق مهارة القفز الأساسي', content: 'التهيئة: مشي سريع + قفز متدرج باستخدام الحبال. التطبيق: القفز فوق حواجز إسفنجية منخفضة مع التركيز على ثني الركبتين عند الهبوط. نشاط إضافي: لعبة "قفز إلى اللون" حسب توجيه المعلم. التهدئة: تمرين استرخاء صوتي وتأمل حركي بسيط.' },
                            { week: '2', date: 'لاحقًا', title: 'تنويع الأدوات', content: 'التهيئة: لعبة "قفزة اللون" باستخدام بطاقات. التطبيق: قفز بالأطواق – قفز على بساط – استخدام الحبل الفردي (محطات). نشاط جماعي: سباق تتابع قفز بين المجموعات. التهدئة: تمدد جانبي + تمرين تنفس.' },
                            { week: '2', date: 'لاحقًا', title: 'استعراض وتقييم', content: 'التهيئة: لعبة تقليد حركات القفز. النشاط الرئيس: عرض فردي من كل طالب لمهارة قفز تعلمها. نشاط إثرائي: رسم الطفل لنفسه أثناء القفز مع تعبير لفظي مبسط. الختام: توزيع شارات تحفيزية (قافز اليوم – قفزتك رائعة).' },
                            { week: '3', date: 'لاحقًا', title: 'تحسين التوازن أثناء القفز', content: 'التهيئة: تمرينات خفيفة للتوازن (وقوف على رجل واحدة). التطبيق: القفز للأمام مع الوقوف لحظة عند الهبوط. نشاط إضافي: قفز جانبي متتابع باستخدام علامات أرضية. التهدئة: تمارين استطالة بسيطة.' },
                            { week: '3', date: 'لاحقًا', title: 'قفز متدرج ومتعدد', content: 'التهيئة: لعبة "قفزة مع الإشارة" (عند سماع التصفيق). التطبيق: قفز متتالي عبر حواجز متفاوتة الارتفاع. نشاط إضافي: لعبة سباق الحواجز البسيط (قفز ثم جري قصير). التهدئة: تنفس عميق + استرخاء عضلي.' },
                            { week: '4', date: 'لاحقًا', title: 'دمج القفز مع أنشطة أخرى', content: 'التهيئة: تمرين الجري في المكان مع قفز متقطع. التطبيق: قفز ثم التقاط كرة صغيرة – قفز للأمام ثم رمي كرة في سلة. نشاط جماعي: لعبة تتابع: قفز + تمرير كرة. التهدئة: تمدد للذراعين والساقين.' },
                            { week: '4', date: 'لاحقًا', title: 'التقييم الختامي', content: 'التهيئة: نشاط حركي جماعي (قفز متتابع في دائرة). التطبيق: أداء فردي لمهارة مختارة من الحصص السابقة. نشاط إثرائي: رسم أو كتابة جملة عن شعوره أثناء التعلم. الختام: تسليم شهادات مشاركة أو بطاقات إنجاز.' }
                        ],
                        strengths: "تحسن ملحوظ في التحكم والتوازن الحركي.\nاستمتاع الطلاب بالأنشطة الحركية.",
                        difficulties: "الخوف من القفز لدى بعض الطلاب في البداية.",
                        achievements: "أداء جميع الطلاب لمهارة القفز بثقة.",
                        remedial_actions: "استخدام حواجز منخفضة جدًا والتشجيع المستمر."
                    },
                    'upper-primary': {
                        name: "مهارات الرياضات الفردية – الصفوف العليا (الوثب الطويل)",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "الصفوف العليا",
                        location: "الملعب المدرسي",
                        tools: "بساط هبوط، شريط قياس، أقماع",
                        learningOutcomes: "• تخصيـص وقـت كا ٍف للمشـاركة فـي نشـاط بدنـي فـردي، ويُظهـر اسـتمرارية فـي الأداء.\n• تنفيـذ مهـارات فرديـة خاصـة بالنشـاط الرياضـي بدقـة وتحكـم متقد ًمـا.\n• إتقـان حـركات فرديـة أساسـية كالجـري والقفـز، ويُظهـر توازنًـا وقـوة بدنيـة.\n• اختيـار نشـاط فـردي يتناسـب مـع اهتماماتـه ويُمارسـه بانتظـام.\n• التعـاون مـع زملائـه فـي تنفيـذ نشـاط رياضـي غيـر صفـي.",
                        assessmentMethods: "الملاحظة الفنية، قياس المسافة، التقييم الذاتي",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'أتعرف على مهارة الوثب بالقرفصاء', content: 'تهيئة: قفز خفيف + مرونة. عرض: مراحل الأداء. تطبيق: تدريب منفصل على كل مرحلة.' },
                            { week: '1', date: 'لاحقًا', title: 'متابعة التعرف والتطبيق', content: 'استكمال تدريب مراحل المهارة دون وثب كامل + تغذية راجعة فورية.' },
                            { week: '2', date: 'لاحقًا', title: 'أجرب المهارة بالتدرج', content: 'تهيئة: «امشِ واقفز ثم تجمّد». تطبيق: المرور بمحطات التدريب (الجري–الطيران–الهبوط).' },
                            { week: '2', date: 'لاحقًا', title: 'تعميق التدرج', content: 'تكرار المحطات مع تصحيح فردي مركّز وتوثيق ملاحظات الأداء.' },
                            { week: '3', date: 'لاحقًا', title: 'تحدي الأداء والتحسين', content: 'عرض: شروط التحدي (الدقة–المسافة). تطبيق: أداء فردي داخل مسار محدد + تسجيل النتائج.' },
                            { week: '3', date: 'لاحقًا', title: 'متابعة التحسين', content: 'محاولات محسّنة وفق أهداف شخصية + توثيق تقدم كل طالب.' },
                            { week: '4', date: 'لاحقًا', title: 'ننجز معًا ونحتفل', content: 'عرض: قواعد المسابقة الودية. تطبيق: منافسة جماعية + تعبئة نموذج التقييم الذاتي.' },
                            { week: '4', date: 'لاحقًا', title: 'ختام وتقييم', content: 'عروض قصيرة، تقويم ذاتي وختامي، تكريم رمزي، توصيات للممارسة المنزلية.' }
                        ],
                        strengths: "فهم الطلاب لمراحل المهارة الفنية.\nالرغبة في تحسين المسافة الشخصية.",
                        difficulties: "صعوبة التنسيق بين الجري والارتقاء في البداية.",
                        achievements: "تحقيق جميع الطلاب لوثبة كاملة صحيحة فنيًا.",
                        remedial_actions: "استخدام علامات بصرية للمساعدة في تحديد مكان الارتقاء."
                    },
                    'middle': {
                        name: "مهارات الرياضات الفردية – المرحلة المتوسطة (كرة الطاولة)",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "المرحلة المتوسطة",
                        location: "صالة رياضية مجهزة بطاولات تنس",
                        tools: "طاولات تنس، مضارب، كرات",
                        learningOutcomes: "• تخصيـص وقـت كا ٍف لممارسـة نشـاط بدنـي فـردي ويُظهـر اسـتمرارية فـي الأداء.\n• تنفيـذ مهـارة فرديـة أساسـية بدقـة وثبـات، ويُظهـر تميـزًا فـي الأداء.\n• تطبيـق مهـارات بدنيـة فرديـة ضمن مواقـف لعـب متنوعـة.\n• تجربـة مجموعـة مـن الألعـاب الفرديـة واختيـار ما يناسبه.\n• التنافـس مـع مجموعـة مـن زملائـه فـي إطـار مـن الاحتـرام والانضبـاط.",
                        assessmentMethods: "الملاحظة الفنية، قوائم الشطب، تحدي عدد التمريرات",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'التعرف إلى المهارة', content: 'التهيئة: تمارين خفيفة لتحريك الرسغين والذراعين + سؤال تفاعلي حول معرفة سابقة باللعبة. العرض: شرح خطوات الوقفة الصحيحة، مسكة المضرب، والتحضير للضربة. التطبيق: تقليد حركي موجه بدون كرة – تدريب على الوقفة والتحكم بالمضرب. التهدئة: مراجعة سريعة بخطوات الأداء عبر سؤال: "ما أول خطوة في الضربة؟".' },
                            { week: '1', date: 'لاحقًا', title: 'أُجرّب الأداء التدريبي', content: 'التهيئة: نشاط جماعي خفيف (تمرير الكرة دون إسقاطها). العرض: مراجعة الخطوات – التركيز على التوقيت واللمس الصحيح للطاولة. التطبيق: تدريبات فردية (ضرب الكرة على الطاولة) + تدريبات زوجية (تمرير وضرب). التهدئة: استطالة الذراعين + تنظيم التنفس.' },
                            { week: '2', date: 'لاحقًا', title: 'تحسين الأداء', content: 'التهيئة: تمرين قفزة خفيفة + ضربة تخيلية. العرض: تذكير سريع بخطوات الأداء مع نموذج من المعلم. التطبيق: تدريبات تبادلية بين الطلاب لزيادة عدد التمريرات الصحيحة باستخدام المهارة. التهدئة: تنفس عميق + مشاركة شعور كل طالب أثناء الأداء.' },
                            { week: '2', date: 'لاحقًا', title: 'تقييم أولي', content: 'التهيئة: حوار جماعي: "متى شعرت أنك تتقن الضربة؟". العرض: مراجعة خطوات الأداء بشكل مبسط. التطبيق: أداء فردي أمام الزملاء مع تسجيل ملاحظات عبر بطاقة تقييم. التهدئة: نشاط ختامي جماعي + تحفيز بشهادات أو ملصقات.' },
                            { week: '3', date: 'لاحقًا', title: 'تنويع أساليب التدريب', content: 'التهيئة: تمرينات مرونة للرسغين. العرض: شرح تدريبات مختلفة لتقوية الضربة (ضرب الكرة المرتدة من الحائط). التطبيق: محطات تدريبية (ضربة فردية – ضربة ثنائية – ضربة مع ارتداد). التهدئة: تمدد جانبي + نقاش قصير حول صعوبات التدريب.' },
                            { week: '3', date: 'لاحقًا', title: 'دمج المهارة مع اللعب', content: 'التهيئة: لعبة "من الأسرع" باستخدام الكرة والمضرب. العرض: شرح كيفية إدخال المهارة في مباراة بسيطة. التطبيق: مباريات قصيرة (نقطة مقابل نقطة) باستخدام الضربة الصحيحة. التهدئة: تهدئة حركية + مشاركة جماعية للأفكار.' },
                            { week: '4', date: 'لاحقًا', title: 'تطوير الاستراتيجيات', content: 'التهيئة: نشاط سريع (ضرب الكرة بشكل عشوائي للترفيه). العرض: شرح أهمية التوجيه في الضربة (يمين/يسار). التطبيق: تدريبات لعب موجهة نحو زوايا محددة من الطاولة. التهدئة: تمرين تنفس + مراجعة أهم ما تعلموه.' },
                            { week: '4', date: 'لاحقًا', title: 'التقييم النهائي', content: 'التهيئة: نشاط جماعي قصير (سلسلة ضربات متتالية). العرض: تذكير شامل بخطوات الأداء. التطبيق: مباراة استعراضية بين الطلاب مع استخدام بطاقات تقييم الأداء. الختام: تكريم المشاركين + توثيق النتائج في ملف إنجاز.' }
                        ],
                        strengths: "تطور سريع في التوافق بين العين واليد.\nاستمتاع الطلاب باللعب التنافسي.",
                        difficulties: "الحاجة إلى عدد كافٍ من الطاولات لجميع الطلاب.",
                        achievements: "قدرة معظم الطلاب على أداء ضربة تبادلية صحيحة.",
                        remedial_actions: "تنظيم التدريب على شكل محطات لتوفير فرص متساوية."
                    },
                    'high-2': {
                        name: "مهارات الرياضات الفردية – المرحلة الثانوية (العدو السريع)",
                        sessions: 6,
                        duration: "270 دقيقة (6 حصص)",
                        target: "المرحلة الثانوية",
                        location: "مضمار الجري، الملعب المدرسي",
                        tools: "ساعة توقيت، أقماع، شارات تحفيزية",
                        learningOutcomes: "• ممارسـة نشـاط بدنـي فـردي منتظـم، ويُظهـر تحسـنًا تدريجيًـا فـي الأداء أو الزمـن.\n• أداء مهــارة فرديــة بدقــة وتحكــم ويُظهــر تميــزًا واض ًحــا يــدل عــلى موهبتــه.\n• إتقــان مهــارات فرديــة متقدمــة ويُظهــر دقــة وتحك ًمــا يتناســبان مــع نمــوه الجســدي.\n• اختيـار نشـاط بدنـي فـردي ينسـجم مـع ميولـه ويُمارسـه بانتظـام.",
                        assessmentMethods: "تسجيل الزمن، تحليل الأداء الفني، التقييم الذاتي",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'أتعرف إلى العدو السريع', content: 'تهيئة: مشي سريع + مرونة. عرض: وضعية الانطلاقة. تطبيق: تجربة أولى للجري لمسافة 50 م وتسجيل الزمن.' },
                            { week: '1', date: 'لاحقًا', title: 'أحسّن الانطلاقة والتحكّم', content: 'تهيئة: قفز من وضع الانحناء. عرض: أخطاء شائعة. تطبيق: محاولات انطلاقة فردية مع تسجيل زمن جديد.' },
                            { week: '2', date: 'لاحقًا', title: 'أجري بنظام', content: 'تهيئة: استجابة لصوت الانطلاق. تطبيق: جولتان/ثلاث مع تسجيل زمني.' },
                            { week: '2', date: 'لاحقًا', title: 'أقيم ذاتي', content: 'تحليل أداء الحصة السابقة مع المعلم + تحديد هدف شخصي + محاولة قياس إضافية.' },
                            { week: '3', date: 'لاحقًا', title: 'أتحدى نفسي', content: 'عرض: هدف التحدي «تحسين أدائي السابق». تطبيق: منافسة عدو سريعة مع مقارنة الزمن السابق والحالي.' },
                            { week: '3', date: 'لاحقًا', title: 'عرض التطور والختام', content: 'عرض نتائج «أبطال العدو» + توصيات للاستمرار الفردي + تقويم نهائي.' }
                        ],
                        strengths: "دافعية عالية لتحسين الزمن الشخصي.\nالنضج البدني يساعد على تحسين الأداء.",
                        difficulties: "الحاجة إلى تصحيح مستمر للأخطاء الفنية في الانطلاقة.",
                        achievements: "تحقيق جميع الطلاب لتحسن في أزمنتهم الشخصية.",
						remedial_actions: "استخدام التصوير البطيء لتحليل حركة الطلاب وتصحيح الأخطاء."
					}
                }
            };

            fieldsData.self_defense = {
                name: "مهارات رياضات الدفاع عن النفس",
                field: "الرياضة والصحة",
                stages: {
                    'primary': {
                        name: "مهارات رياضات الدفاع عن النفس – المرحلة الأولية (كاراتيه)",
                        sessions: 8, 
                        duration: "360 دقيقة (8 حصص)",
                        target: "الصفوف الأولية",
                        location: "صالة رياضية آمنة",
                        tools: "أهداف إسفنجية، مخاريط، بطاقات ملاحظة",
                        learningOutcomes: "• أداء حـركات أساسـية مـن رياضـة دفاعيـة تُسـهم فـي تحسـين توازنـه الحركـي وتعزيـز انضباطـه.\n• تنفيـذ حـركات أساسـية مـن رياضـات الدفـاع عـن النفـس بانضبـاط ودقـة.\n• تنفيـذ أوضـاعٍ حركيـة مـن رياضـات الدفـاع عـن النفـس تُعـزز توازنـه واسـتجابته الحركيـة.",
                        assessmentMethods: "الملاحظة، قائمة شطب، تقويم شفهي",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'التهيئة والتعرف على الدفاع عن النفس', content: 'نشاط تعارفي مع الطلاب، تمارين إحماء بسيطة، وشرح مبسط لمفهوم الدفاع عن النفس وأهميته.' },
                            { week: '1', date: 'لاحقًا', title: 'وضعيات الوقوف الأساسية', content: 'تدريب عملي على وضعيات الوقوف والثبات مع لعبة توازن جماعية.' },
                            { week: '2', date: 'لاحقًا', title: 'حركة اليد الدفاعية الأولى', content: 'عرض الحركة ثم تدريب فردي وجماعي على صد الضربات البسيطة.' },
                            { week: '2', date: 'لاحقًا', title: 'حركة اليد الدفاعية الثانية', content: 'مراجعة سريعة للحركة السابقة، ثم تعلم حركة جديدة مع تطبيق ثنائي.' },
                            { week: '3', date: 'لاحقًا', title: 'حركة القدم الدفاعية', content: 'تدريب عملي على تحريك القدم للجانب أو الخلف لتفادي الهجوم، مع لعبة محاكاة.' },
                            { week: '3', date: 'لاحقًا', title: 'الدمج بين اليد والقدم', content: 'تنفيذ تدريبات تجمع بين صد اليد وحركة القدم في مواقف مبسطة.' },
                            { week: '4', date: 'لاحقًا', title: 'مواقف عملية مبسطة', content: 'لعب أدوار (هجوم وهمي – دفاع) بين الطلاب لتطبيق ما تعلموه.' },
                            { week: '4', date: 'لاحقًا', title: 'استعراض وتقييم', content: 'استعراض فردي وجماعي للحركات الأساسية، مع نشاط تقييمي بسيط وتكريم المشاركين.' }
                        ],
                        strengths: "تحسن ملحوظ في انضباط الطلاب وتركيزهم.\nزيادة الثقة بالنفس.",
                        difficulties: "صعوبة الحفاظ على التوازن في بعض الوقفات.",
                        achievements: "أداء الطلاب للوقفات الأساسية بشكل صحيح.",
                        remedial_actions: "استخدام ألعاب التوازن والتركيز على التكرار البطيء والصحيح."
                    },
                    'upper-primary': {
                        name: "مهارات رياضات الدفاع عن النفس – المرحلة العليا (كاراتيه)",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "الصفوف العليا",
                        location: "صالة رياضية آمنة",
                        tools: "أهداف إسفنجية، بطاقات، أدوات تحديد مسار",
                        learningOutcomes: "• تخصيـص وقـت كا ٍف للمشـاركة فـي نشـاط بدنـي فـردي، ويُظهـر اسـتمرارية فـي الأداء.\n• تنفيـذ مهـارات فرديـة خاصـة بالنشـاط الرياضـي بدقـة وتحكـم متقد ًمـا.\n• إتقـان حـركات فرديـة أساسـية، ويُظهـر توازنًـا وقـوة بدنيـة.\n• اختيـار نشـاط فـردي يتناسـب مـع اهتماماتـه ويُمارسـه بانتظـام.",
                        assessmentMethods: "الملاحظة، قائمة شطب، تقويم الأداء الفني",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'مدخل + وقفة الخيل (Kiba Dachi)', content: 'شرح سلامة؛ تعلّم Kiba Dachi والانتقال بينها؛ لعبة اتزان جانبي.' },
                            { week: '1', date: 'لاحقًا', title: 'الدفاع الداخلي (Uchi Uke)', content: 'تفكيك الحركة ثم تطبيق Uchi Uke أمام أهداف إسفنجية؛ تبادل أدوار ملاحظ/منفّذ.' },
                            { week: '2', date: 'لاحقًا', title: 'التقدّم والتراجع (Ayumi Ashi)', content: 'خطوات Ayumi Ashi وربطها بالوقفة؛ تمرين «خط–مخروط» للحفاظ على المسار.' },
                            { week: '2', date: 'لاحقًا', title: 'دمج: الوقفة + الدفاع', content: 'سلسلة (Kiba Dachi → Uchi Uke) مع تقدّم/تراجع؛ محطات قصيرة؛ تغذية راجعة.' },
                            { week: '3', date: 'لاحقًا', title: 'اتزان وردّ فعل', content: 'ألعاب ردّ فعل مع بطاقات/أهداف؛ توجيه فني للذراع والحوض.' },
                            { week: '3', date: 'لاحقًا', title: '«قتال ظل» دون تماس', content: 'سيناريوهات دفاعية آمنة بلا تماس؛ أدوار (موجّه/منفّذ).' },
                            { week: '4', date: 'لاحقًا', title: 'محطات مهارية مركّبة', content: '3 محطات: وقفة، دفاع، تقدّم/تراجع؛ تدوير فرق؛ تصحيح فردي.' },
                            { week: '4', date: 'لاحقًا', title: 'تقويم ختامي وتغذية راجعة', content: 'تطبيق جماعي قصير؛ قائمة شطب وملاحظة؛ تخطيط للاستمرار.' }
                        ],
                        strengths: "القدرة على دمج أكثر من حركة في سلسلة واحدة.\nالانضباط العالي أثناء التدريب.",
                        difficulties: "الحاجة إلى تركيز عالٍ لتذكر تسلسل الحركات.",
                        achievements: "أداء سلسلة حركية مركبة (وقفة ودفاع وحركة) بشكل صحيح.",
                        remedial_actions: "تفكيك الحركات المركبة والتدريب على كل جزء على حدة."
                    },
                    'middle': {
                        name: "مهارات رياضات الدفاع عن النفس – المرحلة المتوسطة (كاراتيه)",
                        sessions: 8,
                        duration: "360 دقيقة (8 حصص)",
                        target: "المرحلة المتوسطة",
                        location: "صالة رياضية آمنة",
                        tools: "أهداف إسفنجية ثابتة ومتحركة، بطاقات ملاحظة",
                        learningOutcomes: "• تنفيـذ مهـارة فرديـة أساسـية بدقـة وثبـات.\n• تطبيـق مهـارات بدنيـة فرديـة ضمن مواقف لعب متنوعة.\n• التنافـس مـع مجموعـة مـن زملائـه في إطار من الاحترام والانضباط.",
                        assessmentMethods: "الملاحظة، بطاقة ملاحظة فنية، قائمة شطب",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'الوقفة الأمامية (Zenkutsu) والتقدّم/التراجع', content: 'تنفيذ وقفة أمامية، خطوات تقدّم/تراجع، لعبة مسار مخروطي.' },
                            { week: '1', date: 'لاحقًا', title: 'الدفاع السفلي (Gedan Barai) + هدف ثابت', content: 'تفكيك Gedan Barai ثم تطبيقه أمام هدف إسفنجي؛ نهاية بضرب هدف متحرك.' },
                            { week: '2', date: 'لاحقًا', title: 'الدفاع العلوي (Age Uke)', content: 'تسلسل الحركة ثم ربطها بالوقفة؛ تمرين «الردّ على إشارة» لرفع الاستجابة.' },
                            { week: '2', date: 'لاحقًا', title: 'الدفاع الخارجي (Soto Uke) + تحدّي عددي', content: 'أداء Soto Uke بعدد تكرارات محدد في زمن؛ لعبة «من ينفّذ أكثر دفاعات في دقيقة».' },
                            { week: '3', date: 'لاحقًا', title: 'دمج الدفاعات مع الحركة', content: 'تركيبات (تقدّم/تراجع + دفاعات متتابعة)؛ «قتال ظل» دون تماس.' },
                            { week: '3', date: 'لاحقًا', title: 'هدف متحرك وتوقيت الدفاع', content: 'لعبة «ضرب/تفادي هدف متحرك» لرفع التوقيت؛ تحسين التوازن.' },
                            { week: '4', date: 'لاحقًا', title: 'محطات مهارية', content: '3–4 محطات: وقفة، دفاع سفلي/علوي/خارجي، حركة؛ تدوير المجموعات.' },
                            { week: '4', date: 'لاحقًا', title: 'تقويم ختامي وتوثيق تقدم', content: 'تطبيق جماعي قصير؛ بطاقة ملاحظة/قائمة شطب؛ توصيات متابعة.' }
                        ],
                        strengths: "تحسن كبير في سرعة رد الفعل والتوقيت.\nإتقان الدفاعات الأساسية.",
                        difficulties: "الحاجة إلى تدريب مستمر للحفاظ على دقة الحركة.",
                        achievements: "القدرة على أداء الدفاعات الثلاثة الأساسية بحركة انسيابية.",
                        remedial_actions: "استخدام ألعاب رد الفعل والتوقيت لزيادة التحفيز."
                    },
                    'high-2': {
                        name: "مهارات رياضات الدفاع عن النفس – المرحلة الثانوية (كاراتيه)",
                        sessions: 6,
                        duration: "270 دقيقة (6 حصص)",
                        target: "المرحلة الثانوية",
                        location: "صالة رياضية آمنة",
                        tools: "أهداف إسفنجية، أدوات قياس القوة (اختياري)",
                        learningOutcomes: "• ممارسـة نشـاط بدنـي فـردي منتظـم.\n• أداء مهــارة فرديــة بدقــة وتحكــم ويُظهــر تميــزًا واض ًحــا.\n• إتقــان مهــارات فرديــة متقدمــة تتناســب مــع نمــوه الجســدي وتطــوره المهــاري.",
                        assessmentMethods: "الملاحظة، بطاقة ملاحظة فنية، قائمة شطب",
                        details: [
                            { week: '1', date: 'لاحقًا', title: 'وقفة قتالية + Oi-zuki (لكمة أمامية)', content: 'تنفيذ Oi-zuki بخطوات صحيحة لليد والرِّجل؛ تصحيح فردي.' },
                            { week: '1', date: 'لاحقًا', title: 'Mae Geri (الركلة الأمامية)', content: 'تفكيك الحركة: توازن → رفع ركبة → امتداد ساق → عودة؛ تدريبات هدف إسفنجي.' },
                            { week: '2', date: 'لاحقًا', title: 'Gyaku-zuki (لكمة عكسية)', content: 'تركيز على سرعة الأداء وتناسق الذراع مع الرجل الأمامية/الخلفية.' },
                            { week: '2', date: 'لاحقًا', title: 'تركيبات هجومية (لكمة + ركلة)', content: 'سلاسل (Oi-zuki → Mae Geri) بسرعة مضبوطة؛ تغذية راجعة.' },
                            { week: '3', date: 'لاحقًا', title: 'تطبيقات تنافسية آمنة (دون تماس)', content: '«قتال ظل»، أهداف متحركة، تحديات زمنية؛ احترام القواعد والانضباط.' },
                            { week: '3', date: 'لاحقًا', title: 'تقويم ختامي وتوثيق التقدم', content: 'تطبيق جماعي؛ بطاقة ملاحظة/قائمة شطب من الدليل (المعارف–المهارات–القيم).' }
                        ],
                        strengths: "القدرة على تنفيذ هجمات مركبة بدقة وقوة.\nالنضج البدني يسمح بأداء متقدم.",
                        difficulties: "الحاجة إلى انضباط عالٍ لضمان السلامة أثناء التطبيقات التنافسية.",
                        achievements: "إتقان المهارات الهجومية الأساسية وتطبيقها في سلاسل حركية.",
                        remedial_actions: "التركيز على التحكم في القوة والمسافة أثناء «قتال الظل»."
                    }
                }
            };
         
            // END: Content from text file
            
            const weeksDataDefault = {
                'week1': { name: 'الأسبوع الأول', days: { 'الأحد': '1 / 3', 'الاثنين': '2 / 3', 'الثلاثاء': '3 / 3', 'الأربعاء': '4 / 3', 'الخميس': '5 / 3' } },
                'week2': { name: 'الأسبوع الثاني', days: { 'الأحد': '8 / 3', 'الاثنين': '9 / 3', 'الثلاثاء': '10 / 3', 'الأربعاء': '11 / 3', 'الخميس': '12 / 3' } },
                'week3': { name: 'الأسبوع الثالث', days: { 'الأحد': '15 / 3', 'الاثنين': '16 / 3', 'الثلاثاء': '17 / 3', 'الأربعاء': '18 / 3', 'الخميس': '19 / 3' } },
                'week4': { name: 'الأسبوع الرابع', days: { 'الأحد': '22 / 3', 'الاثنين': '23 / 3', 'الثلاثاء': '24 / 3', 'الأربعاء': '25 / 3', 'الخميس': '26 / 3' } },
                'week5': { name: 'الأسبوع الخامس', days: { 'الأحد': '29 / 3', 'الاثنين': '30 / 3', 'الثلاثاء': '1 / 4', 'الأربعاء': '2 / 4', 'الخميس': '3 / 4' }, specialDays: { '1 / 4': { name: 'إجازة' } } },
                'week6': { name: 'الأسبوع السادس', days: { 'الأحد': '6 / 4', 'الاثنين': '7 / 4', 'الثلاثاء': '8 / 4', 'الأربعاء': '9 / 4', 'الخميس': '10 / 4' } },
                'week7': { name: 'الأسبوع السابع', days: { 'الأحد': '13 / 4', 'الاثنين': '14 / 4', 'الثلاثاء': '15 / 4', 'الأربعاء': '16 / 4', 'الخميس': '17 / 4' } },
'week8': { name: 'الأسبوع الثامن', days: { 'الأحد': '20 / 4', 'الاثنين': '21 / 4', 'الثلاثاء': '22 / 4', 'الأربعاء': '23 / 4', 'الخميس': '24 / 4' }, specialDays: { '20 / 4': { name: 'إجازة إضافية' } } },
                'week9': { name: 'الأسبوع التاسع', days: { 'الأحد': '27 / 4', 'الاثنين': '28 / 4', 'الثلاثاء': '29 / 4', 'الأربعاء': '30 / 4', 'الخميس': '1 / 5' } },
                'week10': { name: 'الأسبوع العاشر', days: { 'الأحد': '4 / 5', 'الاثنين': '5 / 5', 'الثلاثاء': '6 / 5', 'الأربعاء': '7 / 5', 'الخميس': '8 / 5' } },
                'week11': { name: 'الأسبوع الحادي عشر', days: { 'الأحد': '11 / 5', 'الاثنين': '12 / 5', 'الثلاثاء': '13 / 5', 'الأربعاء': '14 / 5', 'الخميس': '15 / 5' } },
                'week12': { name: 'الأسبوع الثاني عشر', days: { 'الأحد': '18 / 5', 'الاثنين': '19 / 5', 'الثلاثاء': '20 / 5', 'الأربعاء': '21 / 5', 'الخميس': '22 / 5' } },
                'week13': { name: 'الأسبوع الثالث عشر', days: { 'الأحد': '25 / 5', 'الاثنين': '26 / 5', 'الثلاثاء': '27 / 5', 'الأربعاء': '28 / 5', 'الخميس': '29 / 5' } },
                'week14': { name: 'الأسبوع الرابع عشر', days: { 'الأحد': '9 / 6', 'الاثنين': '10 / 6', 'الثلاثاء': '11 / 6', 'الأربعاء': '12 / 6', 'الخميس': '13 / 6' } },
                'week15': { name: 'الأسبوع الخامس عشر', days: { 'الأحد': '16 / 6', 'الاثنين': '17 / 6', 'الثلاثاء': '18 / 6', 'الأربعاء': '19 / 6', 'الخميس': '20 / 6' }, specialDays: { '20 / 6': { name: 'إجازة إضافية' } } },
                'week16': { name: 'الأسبوع السادس عشر', days: { 'الأحد': '23 / 6', 'الاثنين': '24 / 6', 'الثلاثاء': '25 / 6', 'الأربعاء': '26 / 6', 'الخميس': '27 / 6' }, specialDays: { '23 / 6': { name: 'إجازة إضافية' } } },
                'week17': { name: 'الأسبوع السابع عشر', days: { 'الأحد': '1 / 7', 'الاثنين': '2 / 7', 'الثلاثاء': '3 / 7', 'الأربعاء': '4 / 7', 'الخميس': '5 / 7' } },
                'week18': { name: 'الأسبوع الثامن عشر', days: { 'الأحد': '8 / 7', 'الاثنين': '9 / 7', 'الثلاثاء': '10 / 7', 'الأربعاء': '11 / 7', 'الخميس': '12 / 7' } },
            };
            const weekNames = ['الأول', 'الثاني', 'الثالث', 'الرابع', 'الخامس', 'السادس', 'السابع', 'الثامن', 'التاسع', 'العاشر', 'الحادي عشر', 'الثاني عشر', 'الثالث عشر', 'الرابع عشر', 'الخامس عشر', 'السادس عشر', 'السابع عشر', 'الثامن عشر'];
            const weeksDataWestern = Object.fromEntries(Object.entries(weeksDataDefault).slice(1).map(([k, v], i) => [k, {...v, name: `الأسبوع ${weekNames[i]}` }]));
            
            let activeWeeksData = weeksDataDefault;
            let tempSelectedDates = [];
            let state = {};

            const tabButtons = document.querySelectorAll('.tab-button');
            const contentSections = document.querySelectorAll('.content-section');
            const stageSelectPlan = document.getElementById('stage-select-plan');
            const programSelectPlan = document.getElementById('program-select-plan');
            const objectiveSelect = document.getElementById('objective-select');
            const datePickerBtn = document.getElementById('date-picker-btn');
            const stageSelectReports = document.getElementById('stage-select-reports');
            const programSelectReports = document.getElementById('program-select-reports');
            const generateReportBtn = document.getElementById('generate-report-btn');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    contentSections.forEach(sec => sec.classList.remove('active'));
                    button.classList.add('active');
                    document.getElementById(button.id.replace('tab-btn-', 'content-')).classList.add('active');
                });
            });

            function populateStages(selectElement) {
                const stages = { 'primary': 'الابتدائية (الأولية)', 'upper-primary': 'الابتدائية (العليا)', 'middle': 'المتوسطة', 'high-2': 'الثانوية' };
                selectElement.innerHTML = '<option value="">-- اختر المرحلة الدراسية --</option>';
                for (const key in stages) {
                    selectElement.innerHTML += `<option value="${key}">${stages[key]}</option>`;
                }
            }

            function populateProgramsByStage(stage, programSelectElement, useGenericName = false) {
                programSelectElement.innerHTML = '<option value="">-- اختر البرنامج --</option>';
                programSelectElement.disabled = true;
                if (!stage) return;
                
                Object.entries(fieldsData).forEach(([progKey, progData]) => {
                    if (progData.stages && progData.stages[stage]) {
                        const option = document.createElement('option');
                        option.value = `${progKey}|${stage}`;
                        option.textContent = useGenericName ? progData.name : (progData.stages[stage].name || progData.name);
                        programSelectElement.appendChild(option);
                    }
                });
                programSelectElement.disabled = false;
            }

            function setupPlanTab() {
                stageSelectPlan.addEventListener('change', () => {
                    const stage = stageSelectPlan.value;
                    programSelectPlan.innerHTML = '<option value="">-- اختر البرنامج --</option>';
                    programSelectPlan.disabled = true;
                    objectiveSelect.innerHTML = '<option value="">-- اختر الهدف --</option>';
                    objectiveSelect.disabled = true;

                    if (!stage) {
                        return;
                    }

                    const sportsField = "الرياضة والصحة";
                    Object.entries(fieldsData).forEach(([key, program]) => {
                        if (program.field === sportsField && program.stages[stage]) {
                            programSelectPlan.innerHTML += `<option value="${key}">${program.name}</option>`;
                        }
                    });
                    programSelectPlan.disabled = false;

                    const objectives = { 
                        'تعزيز المدرسة للشراكة المجتمعية': '١- تعزيز المدرسة للشراكة المجتمعية',
                        'دعم الأنشطة الطلابية للسلوك الإيجابي': '٢- دعم الأنشطة الطلابية للسلوك الإيجابي',
                        'تعزيز مشاركة أولياء الأمور في الأنشطة الطلابية': '٣- تعزيز مشاركة أولياء الأمور في الأنشطة الطلابية',
                        'زيادة جاذبية البيئة المدرسية رضى الطالب عن الحياة': '٤- زيادة جاذبية البيئة المدرسية رضى الطالب عن الحياة',
                        'تعزيز الأنشطة الطلابية للانضباط المدرسي': '٥- تعزيز الأنشطة الطلابية للانضباط المدرسي',
                        'أنشطة تعلم تطبيقية ترتبط بحياة المتعلمين': '٦- أنشطة تعلم تطبيقية ترتبط بحياة المتعلمين',
                        'تحسين الأنشطة الطلابية لنواتج التعلم': '٧- تحسين الأنشطة الطلابية لنواتج التعلم',
                        'اعتزاز الطلبة بثقافتهم واحترامهم للتنوع الثقافي': '٨- اعتزاز الطلبة بثقافتهم واحترامهم للتنوع الثقافي',
                        'تفعيل المناسبات الوطنية والأسابيع والأيام العالمية': '٩- تفعيل المناسبات الوطنية والأسابيع والأيام العالمية'
                    };
                    for (const [value, text] of Object.entries(objectives)) {
                        objectiveSelect.innerHTML += `<option value="${value}">${text}</option>`;
                    }
                });

                programSelectPlan.addEventListener('change', () => {
                    state.programKey = programSelectPlan.value;
                    state.stage = stageSelectPlan.value;
                    state.planDates = [];
                    updateProgramDisplay();
                });
                 ['btn-region-other', 'btn-region-western'].forEach(id => document.getElementById(id).addEventListener('click', (e) => { 
                    const newRegion = id.includes('other') ? 'other' : 'western';
                    if (state.region !== newRegion) {
                        state.region = newRegion;
                        updateRegionUI();
                    }
                 }));
                datePickerBtn.addEventListener('click', () => openDatePicker());
                document.getElementById('reset-plan-btn').addEventListener('click', () => { if(confirm('هل أنت متأكد؟ سيتم حذف جميع البيانات المدخلة.')) { localStorage.removeItem('planGeneratorState'); location.reload(); }});
                document.getElementById('generate-plan-btn').addEventListener('click', generatePlan);
            }
             function updateProgramDisplay() {
                if (!state.programKey || !state.stage) return;
                const programKeyOnly = state.programKey;
                const programData = fieldsData[programKeyOnly].stages[state.stage];
                if (!programData) return;
                document.getElementById('program-details-plan').innerHTML = `<p><strong class="font-semibold">البرنامج:</strong> ${programData.name}</p><p><strong class="font-semibold">عدد الحصص المقترح:</strong> ${programData.sessions} حصص</p>`;
                objectiveSelect.disabled = false;
                if (programData.duration.includes("العام الدراسي") || programData.duration.includes("مرنة")) {
                    datePickerBtn.disabled = true;
                    datePickerBtn.textContent = 'البرنامج مستمر أو بمدة مرنة';
                    state.planDates = programData.details.map(d => d.date);
                } else {
                    datePickerBtn.disabled = false;
                    updateDatePickerButton();
                }
                ['strengths', 'difficulties', 'remedial_actions', 'achievements'].forEach(key => { 
                    const elementId = key === 'achievements' ? 'additional-achievements' : key.replace('_', '-');
                    const element = document.getElementById(elementId);
                    if (element) element.value = programData[key] || ''; 
                });
            }

            function updateDatePickerButton() {
                if (!state.programKey || !state.stage) { datePickerBtn.textContent = 'اختر تواريخ الحصص'; return; }
                const programKeyOnly = state.programKey;
                const programData = fieldsData[programKeyOnly].stages[state.stage];
                if (!programData) return;
                const count = state.planDates ? state.planDates.filter(d => d !== 'يحدد لاحقًا').length : 0;
                datePickerBtn.textContent = `اختر تواريخ الحصص (${count} / ${programData.sessions})`;
            }

            function setupReportsTab() {
                populateStages(stageSelectReports);
                stageSelectReports.addEventListener('change', () => {
                    populateProgramsByStage(stageSelectReports.value, programSelectReports, true);
                    generateReportBtn.disabled = true;
                    document.getElementById('report-dates-display').textContent = 'اختر مرحلة وبرنامج لعرض التواريخ';
                });
                programSelectReports.addEventListener('change', () => {
                    generateReportBtn.disabled = !programSelectReports.value;
                    const datesDisplay = document.getElementById('report-dates-display');
                    if (state.planDates && state.planDates.length > 0 && !state.planDates.includes('يحدد لاحقًا')) {
                        state.planDates.sort((a, b) => parseDateForSorting(a) - parseDateForSorting(b));
                        const dateRange = `تواريخ الخطة المحددة: من ${formatFullDate(state.planDates[0])} إلى ${formatFullDate(state.planDates[state.planDates.length - 1])}`;
                        datesDisplay.textContent = dateRange;
                        datesDisplay.classList.remove('text-red-500');
                    } else {
                        datesDisplay.textContent = 'ملاحظة: لم يتم تحديد تواريخ تنفيذ في تبويب الخطة أو أن البرنامج مستمر. سيظهر التاريخ فارغاً في التقرير.';
                        datesDisplay.classList.add('text-red-500');
                    }
                });
                generateReportBtn.addEventListener('click', generateReport);
            }
            
            function generateReport() {
                const [progKey, stageKey] = programSelectReports.value.split('|');
                const programData = fieldsData[progKey].stages[stageKey];
                const leaderName = document.getElementById('leader-name').value;
                const directorName = document.getElementById('director-name').value;
                const educationAdmin = document.getElementById('education-admin').value;
                const schoolName = document.getElementById('school-name').value;

                let dateRange = "لم يتم تحديد التواريخ في الخطة";
                if (state.planDates && state.planDates.length > 0 && !state.planDates.includes('يحدد لاحقًا')) {
                     state.planDates.sort((a, b) => parseDateForSorting(a) - parseDateForSorting(b));
                     dateRange = `من ${formatFullDate(state.planDates[0])} إلى ${formatFullDate(state.planDates[state.planDates.length - 1])}`;
                } else if (programData.duration.includes("العام الدراسي") || programData.duration.includes("مرنة")) {
                    dateRange = "على مدار العام الدراسي أو بمدة مرنة";
                }
                
                const locationLines = (programData.location.match(/\n/g) || []).length + 1;

                const reportHTML = `
                    <header class="mb-4">
                        <div class="flex justify-between items-center pb-2">
                            <img src="https://salogos.org/wp-content/uploads/2021/11/UntiTtled-1-1300x988.png" alt="شعار وزارة التعليم" class="h-20">
                            <div class="flex-1 mr-4 space-y-2 text-base text-right">
                                <p class="font-bold">${educationAdmin}</p>
                                <p class="font-bold">${schoolName}</p>
                            </div>
                        </div>
                        <div class="gradient-line mt-2"></div>
                        <h2 class="text-2xl font-bold text-teal-800 text-center mt-4">تقرير تنفيذ برنامج نشاط</h2>
                    </header>
                    <main>
                        <h3 class="text-xl font-bold mb-3 text-teal-700 text-center">${programData.name}</h3>
                        <table class="w-full mb-4 text-sm border-collapse table-bordered">
                            <tbody>
                                <tr><td class="font-bold bg-slate-50 w-1/5">المرحلة:</td><td colspan="3">${stageSelectReports.options[stageSelectReports.selectedIndex].text}</td></tr>
                                <tr><td class="font-bold bg-slate-50 w-1/5">الهدف من البرنامج:</td><td colspan="3">${state.objective || 'لم يحدد في الخطة'}</td></tr>
                                <tr><td class="font-bold bg-slate-50 w-1/5">تاريخ التنفيذ:</td><td>${dateRange}</td><td class="font-bold bg-slate-50 w-1/5">مكان التنفيذ:</td><td><textarea rows="${locationLines}" oninput='this.style.height = "";this.style.height = this.scrollHeight + "px"' class="w-full border-none p-1 bg-transparent" style="overflow-y:hidden; resize:none;">${programData.location}</textarea></td></tr>
                                <tr><td class="font-bold bg-slate-50 w-1/5">عدد الطلاب المستفيدين:</td><td><input type="text" class="w-full border-none p-1" placeholder="للتعبئة"></td><td class="font-bold bg-slate-50 w-1/5">المعلم/ة المنفذ/ة:</td><td><input type="text" class="w-full border-none p-1" value="${document.getElementById('teacher-name').value}"></td></tr>
                            </tbody>
                        </table>
                        <div class="space-y-4 text-sm">
                            <div class="grid grid-cols-2 gap-4">
                                <div><h4 class="report-label mb-1">نواتج التعلم المستهدفة</h4><p class="p-2 border border-slate-200 whitespace-pre-wrap">${programData.learningOutcomes}</p></div>
                                <div><h4 class="report-label mb-1">إجراءات التنفيذ (ملخص)</h4><p class="p-2 border border-slate-200 whitespace-pre-wrap">${programData.details.map(d => `- ${d.content}`).join('\n')}</p></div>


                            </div>
                            <div><h4 class="report-label mb-1 mt-8">صور للشواهد</h4>
                                <div id="image-upload-grid" class="grid grid-cols-3 gap-4 mt-2">
                                    ${Array(6).fill(0).map((_, i) => `
                                        <div class="aspect-square border-2 border-dashed rounded-lg flex items-center justify-center text-slate-400 relative image-upload-slot">
                                            <label for="image-input-${i}" class="cursor-pointer absolute inset-0 flex flex-col items-center justify-center z-10">
                                                <svg class="w-8 h-8 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg><span>إضافة صورة ${i + 1}</span></label>
                                            <input type="file" id="image-input-${i}" class="hidden" accept="image/*" onchange="previewImage(event, 'image-preview-${i}')">
                                            <img id="image-preview-${i}" class="absolute inset-0 w-full h-full object-cover rounded-lg hidden z-0">
                                        </div>`).join('')}
                                </div>
                            </div>
                        </div>
                    </main>
                    <footer class="pt-8 text-center text-xs">
                        <div class="gradient-line mb-4"></div>
                        <div class="grid grid-cols-2 gap-16">
                            <div class="pt-2 mt-2"><p class="font-bold h-6">${leaderName}</p></div>
                            <div class="pt-2 mt-2"><p class="font-bold h-6">${directorName}</p></div>
                        </div>
                    </footer>`;
                document.getElementById('report-page-content').innerHTML = reportHTML;
                document.getElementById('setup-screen-reports').classList.add('hidden');
                document.getElementById('output-report').classList.remove('hidden');
            }
            
            const parseDateForSorting = (dateString) => { const parts = dateString.split(' '); return parseInt(parts[3], 10) * 100 + parseInt(parts[1], 10); };
            const formatFullDate = (dateString) => { const p = dateString.split(' '); return `${p[1].padStart(2, '0')} / ${p[3].padStart(2, '0')} / 1447 هـ`; };
            const saveState = () => { 
                state.objective = objectiveSelect.value; 
                localStorage.setItem('planGeneratorState', JSON.stringify(state)); 
            };

            window.previewImage = function(event, imgId) {
                const img = document.getElementById(imgId);
                const input = event.target;
                const label = input.closest('.image-upload-slot').querySelector('label');
                if (input.files && input.files[0]) {
                    img.src = URL.createObjectURL(input.files[0]);
                    img.classList.remove('hidden');
                    label.classList.add('opacity-0', 'hover:opacity-75', 'hover:bg-black/50');
                    label.querySelector('span').textContent = 'تغيير الصورة';
                }
            }
            window.openDatePicker = function() {
                const modal = document.getElementById('date-picker-modal');
                const programKeyOnly = state.programKey;
                const programData = fieldsData[programKeyOnly]?.stages[state.stage];
                if (!programData) return;
                tempSelectedDates = [...(state.planDates || [])].filter(d => d !== 'يحدد لاحقًا');
                const container = document.getElementById('modal-weeks-container');
                container.innerHTML = '';
                document.getElementById('modal-title').textContent = `اختر ${programData.sessions} حصص لبرنامج: ${programData.name}`;
                Object.values(activeWeeksData).forEach(weekData => {
                    const weekDiv = document.createElement('div');
                    weekDiv.className = 'p-2 border rounded-md';
                    weekDiv.innerHTML = `<p class="font-semibold text-center mb-2">${weekData.name}</p>`;
                    const weekGrid = document.createElement('div');
                    weekGrid.className = 'week-grid grid grid-cols-5 gap-2';
                    Object.entries(weekData.days).forEach(([dayName, dayDate]) => {
                        const dayButton = document.createElement('button');
                        dayButton.className = 'day p-2 border rounded-md text-sm';
                        const fullDate = `${dayName} ${dayDate}`;
                        dayButton.dataset.date = fullDate;
                        let buttonText = `${dayName}<br>${dayDate}`;
                        if (weekData.specialDays && weekData.specialDays[dayDate]) {
                            dayButton.classList.add('disabled'); dayButton.disabled = true;
                            buttonText += `<br><span class="text-xs">${weekData.specialDays[dayDate].name}</span>`;
                        } else {
                            dayButton.onclick = () => toggleDateSelection(dayButton);
                        }
                        if (tempSelectedDates.includes(fullDate)) dayButton.classList.add('selected');
                        dayButton.innerHTML = buttonText;
                        weekGrid.appendChild(dayButton);
                    });
                    weekDiv.appendChild(weekGrid);
                    container.appendChild(weekDiv);
                });
                modal.style.display = 'flex';
            }

            window.toggleDateSelection = function(button) {
                const date = button.dataset.date;
                const isSelected = button.classList.contains('selected');
                const programKeyOnly = state.programKey;
                const sessions = fieldsData[programKeyOnly].stages[state.stage].sessions;
                if (isSelected) {
                    tempSelectedDates = tempSelectedDates.filter(d => d !== date);
                    button.classList.remove('selected');
                } else {
                    if (tempSelectedDates.length < sessions) {
                        tempSelectedDates.push(date);
                        button.classList.add('selected');
                    } else {
                        alert(`لا يمكن اختيار أكثر من ${sessions} حصص.`);
                    }
                }
            }

            window.closeDatePicker = function() { document.getElementById('date-picker-modal').style.display = 'none'; tempSelectedDates = []; }
            window.saveDates = function() { state.planDates = [...(tempSelectedDates || [])]; updateDatePickerButton(); saveState(); closeDatePicker(); }

            function generatePlan() {
                state = { ...state, objective: objectiveSelect.value, ...Object.fromEntries(['teacher-name', 'leader-name', 'director-name', 'education-admin', 'school-name', 'strengths', 'difficulties', 'remedial-actions'].map(id => [id.replace(/-(\w)/g, (m, p1) => p1.toUpperCase()), document.getElementById(id).value])), achievements: document.getElementById('additional-achievements').value };
                const programKeyOnly = state.programKey;
                const programData = fieldsData[programKeyOnly]?.stages[state.stage];
                if (!programData || !state.objective) { alert('يرجى التأكد من اختيار جميع الحقول المطلوبة.'); return; }
                if (!programData.duration.includes("العام الدراسي") && !programData.duration.includes("مرنة") && (!state.planDates || state.planDates.length === 0)) {
                     alert(`يرجى اختيار حصة واحدة على الأقل لتوليد الخطة.`); return; 
                }
                saveState(); 
                if(state.planDates && !state.planDates.includes('يحدد لاحقًا')) {
                    state.planDates.sort((a, b) => parseDateForSorting(a) - parseDateForSorting(b));
                }
                
                document.getElementById('report-education-admin-plan').textContent = state.educationAdmin;
                document.getElementById('report-school-name-plan').textContent = state.schoolName;
                document.getElementById('report-program-name-plan').textContent = fieldsData[programKeyOnly].name;
                document.getElementById('report-program-details-name-plan').textContent = programData.name;
                document.getElementById('report-objective-plan').textContent = state.objective;
                document.getElementById('report-program-target-plan').textContent = programData.target;
                document.getElementById('report-teacher-name-plan').textContent = state.teacherName;
                document.getElementById('report-duration-plan').textContent = programData.duration;
                document.getElementById('report-location-plan').textContent = programData.location;
                document.getElementById('report-tools-plan').textContent = programData.tools;
                document.getElementById('report-learning-outcomes-plan').textContent = programData.learningOutcomes;
                document.getElementById('report-assessment-methods-plan').textContent = programData.assessmentMethods;
                document.getElementById('report-leader-name-plan').textContent = state.leaderName;
                document.getElementById('report-director-name-plan').textContent = state.directorName;
                document.getElementById('report-additional-achievements-plan').textContent = state.achievements;
                document.getElementById('report-strengths-plan').textContent = state.strengths;
                document.getElementById('report-difficulties-plan').textContent = state.difficulties;
                document.getElementById('report-remedial-actions-plan').textContent = state.remedialActions;

                const tableBody = document.getElementById('plan-table-body');
                tableBody.innerHTML = '';
                state.planDates.forEach((date, index) => {
                    const session = programData.details[index];
                    if (!session) return; 

                    let weekName = session.week || '';
                    if (date && date !== 'يحدد لاحقًا') {
                         for (const key in activeWeeksData) { if (Object.values(activeWeeksData[key].days).includes(date.split(' ').slice(1).join(' '))) { weekName = activeWeeksData[key].name; break; }}
                    }
                    tableBody.innerHTML += `<tr><td>${weekName}</td><td>${formatFullDate(date)}</td><td>${session.title}</td><td>${session.content}</td><td></td></tr>`;
                });
                document.getElementById('setup-screen-plan').classList.add('hidden');
                document.getElementById('output-plan').classList.remove('hidden');
            }
            
            window.printContent = function(elementId) {
                document.querySelectorAll('.content-section').forEach(el => el.classList.remove('printable-active'));
                const elementToPrint = document.getElementById(elementId);
                if (elementToPrint && elementToPrint.parentElement.classList.contains('content-section')) {
                     elementToPrint.parentElement.classList.add('printable-active');
                }
                window.print();
            }

            function updateRegionUI() {
                const btnOther = document.getElementById('btn-region-other');
                const btnWestern = document.getElementById('btn-region-western');
                if (state.region === 'western') {
                    activeWeeksData = weeksDataWestern;
                    btnWestern.classList.add('bg-teal-600', 'text-white');
                    btnOther.classList.remove('bg-teal-600', 'text-white');
                } else {
                    activeWeeksData = weeksDataDefault;
                    btnOther.classList.add('bg-teal-600', 'text-white');
                    btnWestern.classList.remove('bg-teal-600', 'text-white');
                }
                
                // Only reset the dates and update the date picker button's text.
                // Keep all other selections (stage, program, etc.) intact.
                state.planDates = [];
                updateDatePickerButton();
            }
            
            function initializeApp() {
                state = JSON.parse(localStorage.getItem('planGeneratorState')) || { region: 'other' };
                if (state.educationAdmin) document.getElementById('education-admin').value = state.educationAdmin;
                if (state.schoolName) document.getElementById('school-name').value = state.schoolName;
                if (state.teacherName) document.getElementById('teacher-name').value = state.teacherName;
                if (state.leaderName) document.getElementById('leader-name').value = state.leaderName;
                if (state.directorName) document.getElementById('director-name').value = state.directorName;
                if (state.achievements) document.getElementById('additional-achievements').value = state.achievements;
                if (state.strengths) document.getElementById('strengths').value = state.strengths;
                if (state.difficulties) document.getElementById('difficulties').value = state.difficulties;
                if (state.remedialActions) document.getElementById('remedial-actions').value = state.remedialActions;
                
                // Set the initial UI state for the region buttons
                if (state.region === 'western') {
                    document.getElementById('btn-region-western').classList.add('bg-teal-600', 'text-white');
                    activeWeeksData = weeksDataWestern;
                } else {
                    document.getElementById('btn-region-other').classList.add('bg-teal-600', 'text-white');
                    activeWeeksData = weeksDataDefault;
                }

                setupPlanTab();
                setupReportsTab();

                if(state.stage) {
                     stageSelectPlan.value = state.stage;
                     stageSelectPlan.dispatchEvent(new Event('change'));

                     // Use a small delay to allow the program list to populate
                     setTimeout(() => {
                        if (state.programKey) {
                            programSelectPlan.value = state.programKey;
                            programSelectPlan.dispatchEvent(new Event('change'));
                        }
                        if(state.objective) {
                            objectiveSelect.value = state.objective;
                        }
                     }, 100);
                }
            }
            
            initializeApp();
        });
    </script>
</body>
</html>
